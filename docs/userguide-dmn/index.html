<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.8">
<title>Flowable DMN DOCS (v 6.4.1)</title>
<style>

/* normalize.css */

button,hr,input{overflow:visible}audio,canvas,progress,video{display:inline-block}progress,sub,sup{vertical-align:baseline}html{font-family:sans-serif;line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0} menu,article,aside,details,footer,header,nav,section{display:block}h1{font-size:2em;margin:.67em 0}figcaption,figure,main{display:block}figure{margin:1em 40px}hr{box-sizing:content-box;height:0}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}dfn{font-style:italic}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative}sub{bottom:-.25em}sup{top:-.5em}audio:not([controls]){display:none;height:0}img{border-style:none}svg:not(:root){overflow:hidden}button,input,optgroup,select,textarea{font-family:sans-serif;font-size:100%;line-height:1.15;margin:0}button,input{}button,select{text-transform:none}[type=submit], [type=reset],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:ButtonText dotted 1px}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}[hidden],template{display:none}/*# sourceMappingURL=normalize.min.css.map */

/* tocbot 2.1.4 */

.toc{overflow-y:auto}.toc>ul{overflow:hidden;position:relative}.toc-list{margin:0;padding-left:10px}a.toc-link{color:currentColor;height:100%}.is-collapsible{max-height:1000px;overflow:hidden;transition:all 300ms ease-in-out}.is-collapsed{max-height:0}.is-position-fixed{position:fixed !important;top:0}.is-active-link{font-weight:700}.toc-link::before{background-color:#f9f9fb;content:' ';display:inline-block;height:inherit;left:8px;margin-top:-1px;position:absolute;width:2px}.is-active-link::before{background-color:#54BC4B}


/* Activiti Specific */

body {
  color: #494d55;
  font-size: 16px;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

html, body {
  height: 100%;
  width: 100%;
  background: #f9f9f9;
  font-family: "Helvetica Neue",Helvetica,Roboto,Arial,sans-serif;
  color: #484848
}

.page-wrapper {
  min-height: 100%;
  /* equal to footer height */
  margin-bottom: -50px;
}

.page-wrapper:after {
  content: "";
  display: block;
  height: 50px;
}

#header {
  position:fixed;
  top:0px;
  z-index:100000;
  width:100%;
}

#header > h1 {
    background: #a0cc47;
    color: #f9f9f9;
    border-bottom: 2px solid #042944;
    padding: 20px 0 20px 20px;
    font-size: 40px;
    font-weight: 800;
    line-height: 1.1;
    margin: 0;
}

#header > h1:before {
  background:url('images/logo.png');
  background-size: 337px 54px; background-repeat: no-repeat;
  width: 337px;
  height: 54px;
  display:inline-block;
  content:'';
  margin-right: 30px;
}

#author {
  margin-left: 25%;
  font-size: 40px;
}

#content {
  margin: 129px 0 0 27%;
  padding: 10px 40px 0 20px;
  padding-right: 40px;
  line-height: 1.7;
  width: 65%;
  overflow-x: auto;
}

h2, h3, h4, h5, h6 {
  color: #00345a;
}

h2 {
  font-size: 26px;
  margin-top: 0;
  margin-bottom: 20px;
  font-weight: bold;
  padding-bottom: 10px;
  border-bottom: 1px solid #d7d7d7;
}

h3 {
  font-size: 18px;
  margin-top: 0;
  margin-bottom: 0;
  font-weight: bold;
  padding-bottom: 10px;
  /*border-bottom: 1px solid #d7d7d7;*/
}

h4 {
    font-size: 16px;
    font-weight: bold;
}

h5 {
    font-size: 14px;
    font-weight: bold;
}

h6, h7 {
    font-size: 14px;
    font-weight: bold;
    margin-top: 0;
    margin-bottom: 0;
}

.sect1, .sect2 {
  margin-bottom: 20px;
}

.clear
{
  clear: both;
}

.note, .listingblock, .literalblock{
  padding-left: 8px;
  padding-right: 8px;
  margin-bottom: 14px;
  background-color: #f7f7f9;
  border: 1px solid #e1e1e8;
  border-radius: 4px;
  color: #808080;
}

table.tableblock {
  width: 100%;
  max-width: 100%;
  margin-bottom: 20px;
  background-color: transparent;
  border-spacing: 0;
  border-collapse: collapse;
  border: 1px solid #ddd;
  table-layout: fixed;
}

table.tableblock>caption+thead>tr:first-child>td, table.tableblock>caption+thead>tr:first-child>th, table.tableblock>colgroup+thead>tr:first-child>td, table.tableblock>colgroup+thead>tr:first-child>th, table.tableblock>thead:first-child>tr:first-child>td, table.tableblock>thead:first-child>tr:first-child>th {
    border-top: 0;
}

table.tableblock > thead > tr > th {
    border-bottom-color: #8bd6d8;
}

table.tableblock>thead>tr>th {
    vertical-align: bottom;
    border-bottom: 1px solid #ddd;
}

table.tableblock>tbody>tr>td, table.tableblock>tbody>tr>th, table.tableblock>tfoot>tr>td, table.tableblock>tfoot>tr>th, table.tableblock>thead>tr>td, table.tableblock>thead>tr>th {
    padding: 8px;
    line-height: 1.42857143;
    vertical-align: top;
    border-top: 1px solid #ddd;
}

th {
    text-align: left;
}

table.tableblock > tbody > tr:nth-of-type(odd) {
    background-color: #f5f5f5;
}

table.tableblock > tbody > tr:nth-of-type(odd) {
    background-color: #f9f9f9;
}

td > p {
  margin:0;
}

td.content {
  white-space: normal;
}

pre, td, th {
   white-space: pre-wrap;
   white-space: -moz-pre-wrap;
   white-space: -pre-wrap;
   white-space: -o-pre-wrap;
   word-wrap: break-word;
}

img {
  max-width: 100%;
}

a {
  color: #007387;
}

a:hover {
  color: #004c59;
}

#toc-parent {
  width: 25%;
  float: left;
  height: 100%;
  overflow-y: auto;
  position: fixed;
  padding: 10px;
  border-right: 1px solid #ccc;
}

#generated-toc {
    width: 100%;
    height: 100%;
    font-size: 16px;
}

.toc-link {
  text-decoration: none;
}

.toc-list {
  margin: 0 20px 0 10px;
}

.toc-list-item {
  padding: 4px 0 4px 0;
}


div.sect5  p {
    margin-top: 0;
    margin-bottom: 0;
}

div.sect5  code {
    font-family: "Helvetica Neue",Helvetica,Roboto,Arial,sans-serif;
}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
/* Pygments CSS disabled. Pygments is not available. */
</style>
<script type="text/javascript">

/*
 * Tocbot.min.js version 2.1.4
 */

 !function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return e[o].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([/*!*************************!*\
   !*** ./src/js/index.js ***!
   \*************************/
 function(e,t,n){var o,i,r;(function(l){!function(n,l){i=[],o=l(n),r="function"==typeof o?o.apply(t,i):o,!(void 0!==r&&(e.exports=r))}("undefined"!=typeof l?l:this.window||this.global,function(e){"use strict";function t(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var o in n)h.call(n,o)&&(e[o]=n[o])}return e}function o(e,t,n){t||(t=250);var o,i;return function(){var r=n||this,l=+new Date,s=arguments;o&&l<o+t?(clearTimeout(i),i=setTimeout(function(){o=l,e.apply(r,s)},t)):(o=l,e.apply(r,s))}}var i,r,l,s=n(/*! smooth-scroll */1),c=n(/*! ./default-options.js */2),a={},u={},d=n(/*! ./build-html.js */3),f=n(/*! ./parse-content.js */4),m=(e.document,document.body,!!e.document.querySelector&&!!e.addEventListener),h=Object.prototype.hasOwnProperty;return u.destroy=function(){try{document.querySelector(a.tocSelector).innerHTML=""}catch(e){console.warn("Element not found: "+a.tocSelector)}document.removeEventListener("scroll",this._scrollListener,!1),document.removeEventListener("resize",this._scrollListener,!1),i&&document.removeEventListener("click",this._clickListener,!1),s&&s.destroy()},u.init=function(e){if(m&&(a=t(c,e||{}),this.options=a,this.state={},i=d(a),r=f(a),this._buildHtml=i,this._parseContent=r,u.destroy(),l=r.selectHeadings(a.contentSelector,a.headingSelector),null!==l)){var n=r.nestHeadingsArray(l),h=n.nest;return i.render(a.tocSelector,h),this._scrollListener=o(function(){i.updateToc(l)},a.throttleTimeout),this._scrollListener(),document.addEventListener("scroll",this._scrollListener,!1),document.addEventListener("resize",this._scrollListener,!1),this._clickListener=o(function(e){i.disableTocAnimation(e),i.updateToc(l)},a.throttleTimeout),document.addEventListener("click",this._clickListener,!1),s&&(this.smoothScroll=s.init(t(a.smoothScrollOptions,{callback:i.enableTocAnimation}))),this}},u.refresh=function(e){u.destroy(),u.init(e||this.options)},e.tocbot=u,u})}).call(t,function(){return this}())},/*!******************************************************!*\
   !*** ./~/smooth-scroll/dist/js/smooth-scroll.min.js ***!
   \******************************************************/
 function(e,t,n){var o,i,r;(function(n){/*! smooth-scroll v10.0.1 | (c) 2016 Chris Ferdinandi | MIT License | http://github.com/cferdinandi/smooth-scroll */
 !function(n,l){i=[],o=l(n),r="function"==typeof o?o.apply(t,i):o,!(void 0!==r&&(e.exports=r))}("undefined"!=typeof n?n:this.window||this.global,function(e){"use strict";var t,n,o,i,r,l,s,c={},a="querySelector"in document&&"addEventListener"in e,u={selector:"[data-scroll]",selectorHeader:null,speed:500,easing:"easeInOutCubic",offset:0,callback:function(){}},d=function(){var e={},t=!1,n=0,o=arguments.length;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(t=arguments[0],n++);for(var i=function(n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t&&"[object Object]"===Object.prototype.toString.call(n[o])?e[o]=d(!0,e[o],n[o]):e[o]=n[o])};o>n;n++){var r=arguments[n];i(r)}return e},f=function(e){return Math.max(e.scrollHeight,e.offsetHeight,e.clientHeight)},m=function(e,t){var n,o,i=t.charAt(0),r="classList"in document.documentElement;for("["===i&&(t=t.substr(1,t.length-2),n=t.split("="),n.length>1&&(o=!0,n[1]=n[1].replace(/"/g,"").replace(/'/g,"")));e&&e!==document&&1===e.nodeType;e=e.parentNode){if("."===i)if(r){if(e.classList.contains(t.substr(1)))return e}else if(new RegExp("(^|\\s)"+t.substr(1)+"(\\s|$)").test(e.className))return e;if("#"===i&&e.id===t.substr(1))return e;if("["===i&&e.hasAttribute(n[0])){if(!o)return e;if(e.getAttribute(n[0])===n[1])return e}if(e.tagName.toLowerCase()===t)return e}return null},h=function(e){"#"===e.charAt(0)&&(e=e.substr(1));for(var t,n=String(e),o=n.length,i=-1,r="",l=n.charCodeAt(0);++i<o;){if(t=n.charCodeAt(i),0===t)throw new InvalidCharacterError("Invalid character: the input contains U+0000.");r+=t>=1&&31>=t||127==t||0===i&&t>=48&&57>=t||1===i&&t>=48&&57>=t&&45===l?"\\"+t.toString(16)+" ":t>=128||45===t||95===t||t>=48&&57>=t||t>=65&&90>=t||t>=97&&122>=t?n.charAt(i):"\\"+n.charAt(i)}return"#"+r},p=function(e,t){var n;return"easeInQuad"===e&&(n=t*t),"easeOutQuad"===e&&(n=t*(2-t)),"easeInOutQuad"===e&&(n=.5>t?2*t*t:-1+(4-2*t)*t),"easeInCubic"===e&&(n=t*t*t),"easeOutCubic"===e&&(n=--t*t*t+1),"easeInOutCubic"===e&&(n=.5>t?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1),"easeInQuart"===e&&(n=t*t*t*t),"easeOutQuart"===e&&(n=1- --t*t*t*t),"easeInOutQuart"===e&&(n=.5>t?8*t*t*t*t:1-8*--t*t*t*t),"easeInQuint"===e&&(n=t*t*t*t*t),"easeOutQuint"===e&&(n=1+--t*t*t*t*t),"easeInOutQuint"===e&&(n=.5>t?16*t*t*t*t*t:1+16*--t*t*t*t*t),n||t},v=function(e,t,n){var o=0;if(e.offsetParent)do o+=e.offsetTop,e=e.offsetParent;while(e);return o=Math.max(o-t-n,0),Math.min(o,b()-g())},g=function(){return Math.max(document.documentElement.clientHeight,e.innerHeight||0)},b=function(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)},C=function(e){return e&&"object"==typeof JSON&&"function"==typeof JSON.parse?JSON.parse(e):{}},S=function(e){return e?f(e)+e.offsetTop:0},y=function(t,n,o){o||(t.focus(),document.activeElement.id!==t.id&&(t.setAttribute("tabindex","-1"),t.focus(),t.style.outline="none"),e.scrollTo(0,n))};c.animateScroll=function(n,o,l){var c=C(o?o.getAttribute("data-options"):null),a=d(t||u,l||{},c),f="[object Number]"===Object.prototype.toString.call(n),m=f||!n.tagName?null:n;if(f||m){var h=e.pageYOffset;a.selectorHeader&&!i&&(i=document.querySelector(a.selectorHeader)),r||(r=S(i));var g,x,N=f?n:v(m,r,parseInt(a.offset,10)),L=N-h,O=b(),E=0,A=function(t,i,r){var l=e.pageYOffset;(t==i||l==i||e.innerHeight+l>=O)&&(clearInterval(r),y(n,i,f),a.callback(n,o))},H=function(){E+=16,g=E/parseInt(a.speed,10),g=g>1?1:g,x=h+L*p(a.easing,g),e.scrollTo(0,Math.floor(x)),A(x,N,s)},T=function(){clearInterval(s),s=setInterval(H,16)};0===e.pageYOffset&&e.scrollTo(0,0),T()}};var x=function(t){e.location.hash,n&&(n.id=n.getAttribute("data-scroll-id"),c.animateScroll(n,o),n=null,o=null)},N=function(i){if(0===i.button&&!i.metaKey&&!i.ctrlKey&&(o=m(i.target,t.selector),o&&"a"===o.tagName.toLowerCase()&&o.hostname===e.location.hostname&&o.pathname===e.location.pathname&&/#/.test(o.href))){var r=h(o.hash);if("#"===r){i.preventDefault(),n=document.body;var l=n.id?n.id:"smooth-scroll-top";return n.setAttribute("data-scroll-id",l),n.id="",void(e.location.hash.substring(1)===l?x():e.location.hash=l)}n=document.querySelector(r),n&&(n.setAttribute("data-scroll-id",n.id),n.id="",o.hash===e.location.hash&&(i.preventDefault(),x()))}},L=function(e){l||(l=setTimeout(function(){l=null,r=S(i)},66))};return c.destroy=function(){t&&(document.removeEventListener("click",N,!1),e.removeEventListener("resize",L,!1),t=null,n=null,o=null,i=null,r=null,l=null,s=null)},c.init=function(n){a&&(c.destroy(),t=d(u,n||{}),i=t.selectorHeader?document.querySelector(t.selectorHeader):null,r=S(i),document.addEventListener("click",N,!1),e.addEventListener("hashchange",x,!1),i&&e.addEventListener("resize",L,!1))},c})}).call(t,function(){return this}())},/*!***********************************!*\
   !*** ./src/js/default-options.js ***!
   \***********************************/
 function(e,t){e.exports={tocSelector:".js-toc",contentSelector:".js-toc-content",headingSelector:"h1, h2, h3",ignoreSelector:".js-toc-ignore",linkClass:"toc-link",extraLinkClasses:"",activeLinkClass:"is-active-link",listClass:"toc-list",extraListClasses:"",isCollapsedClass:"is-collapsed",collapsibleClass:"is-collapsible",listItemClass:"toc-list-item",collapseDepth:0,smoothScrollOptions:{easing:"easeInOutCubic",offset:0,speed:300,updateURL:!0},headingsOffset:0,throttleTimeout:50,positionFixedSelector:null,positionFixedClass:"is-position-fixed",fixedSidebarOffset:"auto",includeHtml:!1}},/*!******************************!*\
   !*** ./src/js/build-html.js ***!
   \******************************/
 function(e,t){e.exports=function(e){function t(e,n){var r=n.appendChild(o(e));if(e.children.length){var l=i(e.isCollapsed);e.children.forEach(function(e){t(e,l)}),r.appendChild(l)}}function n(e,n){var o=!1,r=i(o);n.forEach(function(e){t(e,r)});var l=document.querySelector(e);if(null!==l)return l.firstChild&&l.removeChild(l.firstChild),l.appendChild(r)}function o(t){var n=document.createElement("li"),o=document.createElement("a");return e.listItemClass&&n.setAttribute("class",e.listItemClass),e.includeHtml&&t.childNodes.length?u.call(t.childNodes,function(e){o.appendChild(e.cloneNode(!0))}):o.textContent=t.textContent,o.setAttribute("data-scroll",""),o.setAttribute("href","#"+t.id),o.setAttribute("class",e.linkClass+h+"node-name--"+t.nodeName+h+e.extraLinkClasses),n.appendChild(o),n}function i(t){var n=document.createElement("ul"),o=e.listClass+h+e.extraListClasses;return t&&(o+=h+e.collapsibleClass,o+=h+e.isCollapsedClass),n.setAttribute("class",o),n}function r(){var t=document.documentElement.scrollTop||f.scrollTop,n=document.querySelector(e.positionFixedSelector);"auto"===e.fixedSidebarOffset&&(e.fixedSidebarOffset=document.querySelector(e.tocSelector).offsetTop),t>e.fixedSidebarOffset?n.className.indexOf(e.positionFixedClass)===-1&&(n.className+=h+e.positionFixedClass):n.className=n.className.split(h+e.positionFixedClass).join("")}function l(t){var n=document.documentElement.scrollTop||f.scrollTop;e.positionFixedSelector&&r();var o,i=t;if(m&&null!==document.querySelector(e.tocSelector)&&i.length>0){d.call(i,function(t,r){if(t.offsetTop>n+e.headingsOffset){var l=0===r?r:r-1;return o=i[l],!0}if(r===i.length-1)return o=i[i.length-1],!0});var l=document.querySelector(e.tocSelector).querySelectorAll("."+e.linkClass);u.call(l,function(t){t.className=t.className.split(h+e.activeLinkClass).join("")});var c=document.querySelector(e.tocSelector).querySelector("."+e.linkClass+".node-name--"+o.nodeName+'[href="#'+o.id+'"]');c.className+=h+e.activeLinkClass;var a=document.querySelector(e.tocSelector).querySelectorAll("."+e.listClass+"."+e.collapsibleClass);u.call(a,function(t){var n=h+e.isCollapsedClass;t.className.indexOf(n)===-1&&(t.className+=h+e.isCollapsedClass)}),c.nextSibling&&(c.nextSibling.className=c.nextSibling.className.split(h+e.isCollapsedClass).join("")),s(c.parentNode.parentNode)}}function s(t){return t.className.indexOf(e.collapsibleClass)!==-1?(t.className=t.className.split(h+e.isCollapsedClass).join(""),s(t.parentNode.parentNode)):t}function c(t){var n=t.target||t.srcElement;n.className.indexOf(e.linkClass)!==-1&&(m=!1)}function a(){m=!0}var u=[].forEach,d=[].some,f=document.body,m=!0,h=" ";return{enableTocAnimation:a,disableTocAnimation:c,render:n,updateToc:l}}},/*!*********************************!*\
   !*** ./src/js/parse-content.js ***!
   \*********************************/
 function(e,t){e.exports=function(e){function t(e){return e[e.length-1]}function n(e){return+e.nodeName.split("H").join("")}function o(t){var o={id:t.id,children:[],nodeName:t.nodeName,headingLevel:n(t),textContent:t.textContent.trim()};return e.includeHtml&&(o.childNodes=t.childNodes),o}function i(i,r){for(var l=o(i),s=n(i),c=r,a=t(c),u=a?a.headingLevel:0,d=s-u;d>0;)a=t(c),a&&void 0!==a.children&&(c=a.children),d--;return s>=e.collapseDepth&&(l.isCollapsed=!0),c.push(l),c}function r(t,n){var o=n;e.ignoreSelector&&(o=n.split(",").map(function(t){return t.trim()+":not("+e.ignoreSelector+")"}));try{return document.querySelector(t).querySelectorAll(o)}catch(i){return console.warn("Element not found: "+t),null}}function l(e){return s.call(e,function(e,t){var n=o(t);return i(n,e.nest),e},{nest:[]})}var s=[].reduce;return{nestHeadingsArray:l,selectHeadings:r}}}]);
 //# sourceMappingURL=tocbot.min.js.map

</script>

<script type="text/javascript">

  var generateToc = function() {
    var readyState = document.readyState;
    if (readyState === 'interactive' || readyState == 'complete') {

      var headerSize = 140;

      var tocParentNode = document.createElement("div");
      tocParentNode.setAttribute("id", "toc-parent");

      var generatedTocNode = document.createElement("div");
      generatedTocNode.setAttribute("id", "generated-toc");
      tocParentNode.appendChild(generatedTocNode);

      var contentNode = document.getElementById("content");
      contentNode.parentNode.insertBefore(tocParentNode, contentNode);

      var clearNode = document.createElement("div");
      clearNode.setAttribute("class", "clear");
      contentNode.parentNode.appendChild(clearNode);

      tocbot.init({
        tocSelector: '#generated-toc',
        contentSelector: '#content',
        headingSelector: 'h2, h3, h4, h5',
        headingsOffset: headerSize,
        smoothScrollOptions: {
          easing: 'easeInOutCubic',
          offset: headerSize,
          speed: 300, // animation duration.
          updateURL: true
        },
        collapseDepth: 0
      });

    } else {
      window.setTimeout(function(){
        generateToc();
      }, 50);
    }

  }
  generateToc();

</script>
</head>
<body class="book">
<div id="header">
<h1>Flowable DMN DOCS (v 6.4.1)</h1>
</div>
<div id="content">
<div class="sect1">
<h2 id="_introduction">1. Introduction</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="license">1.1. License</h3>
<div class="paragraph">
<p>Flowable is distributed under <a href="http://www.apache.org/licenses/LICENSE-2.0.html">the Apache V2 license</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="download">1.2. Download</h3>
<div class="paragraph">
<p><a href="http://www.flowable.org/downloads.html"><a href="http://www.flowable.org/downloads.html" class="bare">http://www.flowable.org/downloads.html</a></a></p>
</div>
</div>
<div class="sect2">
<h3 id="sources">1.3. Sources</h3>
<div class="paragraph">
<p>The distribution contains most of the sources as JAR files. The source code for Flowable can be found on
  <a href="https://github.com/flowable/flowable-engine"><a href="https://github.com/flowable/flowable-engine" class="bare">https://github.com/flowable/flowable-engine</a></a></p>
</div>
</div>
<div class="sect2">
<h3 id="required.software">1.4. Required software</h3>
<div class="sect3">
<h4 id="_jdk_8">1.4.1. JDK 8+</h4>
<div class="paragraph">
<p>Flowable runs on a JDK higher than or equal to version 8.  Go to <a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Oracle Java SE downloads</a> and click on button "Download JDK".  There are installation instructions on that page as well. To verify that your installation was successful, run <code>java -version</code> on the command line.  That should print the installed version of your JDK.</p>
</div>
</div>
<div class="sect3">
<h4 id="_ide">1.4.2. IDE</h4>
<div class="paragraph">
<p>Flowable development can be done with the IDE of your choice. If you would like to use the Flowable Designer then you need Eclipse Mars or Neon.
Download the Eclipse distribution of your choice from <a href="http://www.eclipse.org/downloads/">the Eclipse download page</a>. Unzip the downloaded file and then you should be able to start it with the Eclipse file in the directory <code>eclipse</code>.
Further on in this guide, there is a section on <a href="#eclipseDesignerInstallation">installing our eclipse designer plugin</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="reporting.problems">1.5. Reporting problems</h3>
<div class="paragraph">
<p>We expect developers to have read <a href="http://www.catb.org/~esr/faqs/smart-questions.html">How to ask questions the smart way</a> before reporting or asking anything.</p>
</div>
<div class="paragraph">
<p>After you&#8217;ve done that you can post questions, comments or suggestions for enhancements on <a href="https://forum.flowable.org">the User forum</a> and create issues for bugs in <a href="https://github.com/flowable/flowable-engine/issues">our Github issue tracker</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="experimental">1.6. Experimental features</h3>
<div class="paragraph">
<p>Sections marked with <strong>[EXPERIMENTAL]</strong> should not be considered stable.</p>
</div>
<div class="paragraph">
<p>All classes that have <code>.impl.</code> in the package name are internal implementation classes and cannot be considered stable or guaranteed in any way.  However, if the User Guide mentions any classes as configuration values, they are supported and can be considered stable.</p>
</div>
</div>
<div class="sect2">
<h3 id="internal">1.7. Internal implementation classes</h3>
<div class="paragraph">
<p>In the JAR files, all classes in packages that have <code>.impl.</code> (e.g. <code>org.flowable.engine.impl.db</code>) in their name are implementation classes and should be considered internal use only. No stability guarantees are given on classes or interfaces that are in implementation classes.</p>
</div>
</div>
<div class="sect2">
<h3 id="_versioning_strategy">1.8. Versioning Strategy</h3>
<div class="paragraph">
<p>Versions are denoted using a standard triplet of integers: <strong>MAJOR.MINOR.MICRO</strong>. The intention is that <strong>MAJOR</strong> versions are for evolutions of the core engines. <strong>MINOR</strong> versions are for new features and new APIs. <strong>MICRO</strong> versions are for bug fixes and improvements.</p>
</div>
<div class="paragraph">
<p>In general, Flowable attempts to remain "source compatible" in <strong>MINOR</strong> and <strong>MICRO</strong> releases for all non internal implementation classes. We define "source compatible" to mean an application will continue to build without error and the semantics have remained unchanged. Flowable also attempts to remain "binary compatible" in <strong>MINOR</strong> and <strong>MICRO</strong> releases. We define "binary compatible" to mean that this new version of Flowable can be dropped as a jar replacement into a compiled application and continue to function properly.</p>
</div>
<div class="paragraph">
<p>In case an API change is introduced in a <strong>MINOR</strong> release, the strategy is that a backwards compatible version is kept in it, annotated with <em>@Deprecated</em>. Such deprecated APIs will then be removed two <strong>MINOR</strong> versions later.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuration">2. Configuration</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="configuration">2.1. Creating a DMN Engine</h3>
<div class="paragraph">
<p><em>The Flowable DMN engine is structured in a very similar way to the Flowable process engine. As a result, parts of the documentation are very similar to their process engine counterpart.</em></p>
</div>
<div class="paragraph">
<p>The Flowable DMN engine is configured through an XML file named <code>flowable.dmn.cfg.xml</code>. Note that this is <strong>not</strong> applicable if you&#8217;re using <a href="#springintegration">the Spring style of building a DMN engine</a>.</p>
</div>
<div class="paragraph">
<p>The easiest way to obtain a <code>DmnEngine</code>, is to use the <code>org.flowable.dmn.engine.DmnEngines</code> class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java">DmnEngine dmnEngine = DMNEngines.getDefaultDmnEngine()</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will look for a <code>flowable.dmn.cfg.xml</code> file on the classpath and construct an engine based on the configuration in that file. The following snippet shows an example configuration.  The following sections will give a detailed overview of the configuration properties.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml">&lt;beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"&gt;

  &lt;bean id="dmnEngineConfiguration" class="org.flowable.dmn.engine.impl.cfg.StandaloneDmnEngineConfiguration"&gt;

    &lt;property name="jdbcUrl" value="jdbc:h2:mem:flowable;DB_CLOSE_DELAY=1000" /&gt;
    &lt;property name="jdbcDriver" value="org.h2.Driver" /&gt;
    &lt;property name="jdbcUsername" value="sa" /&gt;
    &lt;property name="jdbcPassword" value="" /&gt;

    &lt;property name="databaseSchemaUpdate" value="true" /&gt;

    &lt;property name="strictMode" value="false"/&gt;

  &lt;/bean&gt;

&lt;/beans&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that the configuration XML is in fact a Spring configuration. <strong>This does not mean that Flowable DMN can only be used in a Spring environment!</strong> We are simply leveraging the parsing and dependency injection capabilities of Spring internally for building up the engine.</p>
</div>
<div class="paragraph">
<p>The DMNEngineConfiguration object can also be created programmatically using the configuration file. It is also possible to use a different bean ID (for example, see line 3).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java">DmnEngineConfiguration.
  createDmnEngineConfigurationFromResourceDefault();
  createDmnEngineConfigurationFromResource(String resource);
  createDmnEngineConfigurationFromResource(String resource, String beanName);
  createDmnEngineConfigurationFromInputStream(InputStream inputStream);
  createDmnEngineConfigurationFromInputStream(InputStream inputStream, String beanName);</code></pre>
</div>
</div>
<div class="paragraph">
<p>It is also possible to not use a configuration file and create a configuration based on
defaults (see <a href="#configurationClasses">the different supported classes</a> for more information).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java">DmnEngineConfiguration.createStandaloneDmnEngineConfiguration();
DmnEngineConfiguration.createStandaloneInMemDmnEngineConfiguration();</code></pre>
</div>
</div>
<div class="paragraph">
<p>All these <code>DmnEngineConfiguration.createXXX()</code> methods return a <code>DmnEngineConfiguration</code> that can be further tweaked if needed. After calling the <code>buildDmnEngine()</code> operation, a <code>DmnEngine</code> is created:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java">DmnEngine dmnEngine = DmnEngineConfiguration.createStandaloneInMemDmnEngineConfiguration()
  .setDatabaseSchemaUpdate(DmnEngineConfiguration.DB_SCHEMA_UPDATE_FALSE)
  .setJdbcUrl("jdbc:h2:mem:my-own-db;DB_CLOSE_DELAY=1000")
  .buildDmnEngine();</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configurationRoot">2.2. DmnEngineConfiguration bean</h3>
<div class="paragraph">
<p>The <code>flowable.dmn.cfg.xml</code> must contain a bean that has the ID <code>'dmnEngineConfiguration'</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"> &lt;bean id="dmnEngineConfiguration" class="org.flowable.dmn.engine.impl.cfg.StandaloneDmnEngineConfiguration"&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This bean is then used to construct the <code>DmnEngine</code>. There are multiple classes available that can be used to define the <code>dmnEngineConfiguration</code>. These classes represent different environments, and set defaults accordingly. It&#8217;s best practice to select the class that most closely matches your environment, to minimize the number of properties needed to configure the engine. The following classes are currently available: <a id="configurationClasses"></a></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>org.flowable.dmn.engine.impl.cfg.StandaloneDmnEngineConfiguration</strong>: the process engine is used in a standalone way. Flowable will take care of the transactions. By default, the database will only be checked when the engine boots (and an exception is thrown if there&#8217;s no Flowable DMN schema or the schema version is incorrect).</p>
</li>
<li>
<p><strong>org.flowable.dmn.engine.impl.cfg.StandaloneInMemDmnEngineConfiguration</strong>: this is a convenience class for unit testing purposes. Flowable DMN will take care of the transactions. An H2 in-memory database is used by default. The database will be created and dropped when the engine boots and shuts down. When using this, probably no additional configuration is needed).</p>
</li>
<li>
<p><strong>org.flowable.dmn.spring.SpringDmnEngineConfiguration</strong>: To be used when the DMN engine is used in a Spring environment.  See <a href="#springintegration">the Spring integration section</a> for more information.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_plug_into_process_engine">2.3. Plug into Process Engine</h3>
<div class="paragraph">
<p>In addition to running in standalone mode it&#8217;s also possible to plug the DMN engine into the Process engine. This makes the Process engine aware of it and other engines. This enables, for example, the deployment of artifacts containing not only BPMN models, but also DMN models, to the Process engine&#8217;s deployment service API.</p>
</div>
<div class="paragraph">
<p>To make the Process engine aware of the DMN engine, the <strong>org.flowable.dmn.engine.configurator.DmnEngineConfigurator</strong> needs to be added to list of configurators in the process engine configuration.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml">&lt;bean id="dmnEngineConfiguration" class="org.flowable.dmn.engine.impl.cfg.StandaloneDmnEngineConfiguration"&gt;
    &lt;property name="jdbcUrl" value="jdbc:h2:mem:flowable;DB_CLOSE_DELAY=1000" /&gt;
    &lt;property name="jdbcDriver" value="org.h2.Driver" /&gt;
    &lt;property name="jdbcUsername" value="sa" /&gt;
    &lt;property name="jdbcPassword" value="" /&gt;
    ...
&lt;/bean&gt;

&lt;bean id="dmnEngineConfigurator" class="org.flowable.dmn.engine.configurator.DmnEngineConfigurator"&gt;
    &lt;property name="dmnEngineConfiguration" ref="dmnEngineConfiguration" /&gt;
&lt;/bean&gt;

&lt;bean id="processEngineConfiguration" class="org.flowable.engine.impl.cfg.StandaloneProcessEngineConfiguration"&gt;
    &lt;property name="configurators"&gt;
      &lt;list&gt;
        &lt;ref bean="dmnEngineConfigurator" /&gt;
      &lt;/list&gt;
    &lt;/property&gt;
    ...
&lt;/bean&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="databaseConfiguration">2.4. Database configuration</h3>
<div class="paragraph">
<p>There are two ways to configure the database that the Flowable DMN engine will use. The first option is to define the JDBC properties of the database:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>jdbcUrl</strong>: JDBC URL of the database.</p>
</li>
<li>
<p><strong>jdbcDriver</strong>: implementation of the driver for the specific database type.</p>
</li>
<li>
<p><strong>jdbcUsername</strong>: username to connect to the database.</p>
</li>
<li>
<p><strong>jdbcPassword</strong>: password to connect to the database.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The data source that is constructed based on the provided JDBC properties will have the default <a href="http://www.mybatis.org/">MyBatis</a> connection pool settings. The following attributes can optionally be set to tweak that connection pool (taken from the MyBatis documentation):</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>jdbcMaxActiveConnections</strong>: The maximum number of active connections that the connection pool can contain at any time. Default is 10.</p>
</li>
<li>
<p><strong>jdbcMaxIdleConnections</strong>: The maximum number of idle connections that the connection pool can contain at any time.</p>
</li>
<li>
<p><strong>jdbcMaxCheckoutTime</strong>: The amount of time in milliseconds a connection can be <em>checked out</em> from the connection pool before it is forcefully returned. Default is 20000 (20 seconds).</p>
</li>
<li>
<p><strong>jdbcMaxWaitTime</strong>: This is a low level setting that gives the pool a chance to print a log status and re-attempt the acquisition of a connection in the case that it is taking unusually long (to avoid failing silently forever if the pool is misconfigured) Default is 20000 (20 seconds).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Example database configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml">&lt;property name="jdbcUrl" value="jdbc:h2:mem:flowable_dmn;DB_CLOSE_DELAY=1000" /&gt;
&lt;property name="jdbcDriver" value="org.h2.Driver" /&gt;
&lt;property name="jdbcUsername" value="sa" /&gt;
&lt;property name="jdbcPassword" value="" /&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Our benchmarks have shown that the MyBatis connection pool is not the most efficient or resilient when dealing with a lot of concurrent requests. As such, it is advisable to us a <code>javax.sql.DataSource</code> implementation (such as HikariCP, Tomcat JDBC Connection Pool, and so on) and inject it into the process engine configuration :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml">&lt;bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" &gt;
  &lt;property name="driverClassName" value="com.mysql.jdbc.Driver" /&gt;
  &lt;property name="url" value="jdbc:mysql://localhost:3306/flowable_dmn" /&gt;
  &lt;property name="username" value="flowable" /&gt;
  &lt;property name="password" value="flowable" /&gt;
  &lt;property name="defaultAutoCommit" value="false" /&gt;
&lt;/bean&gt;

&lt;bean id="dmnEngineConfiguration" class="org.flowable.dmn.engine.impl.cfg.StandaloneDmnEngineConfiguration"&gt;

    &lt;property name="dataSource" ref="dataSource" /&gt;
    ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that Flowable DMN does not ship with a library that allows you to define such a data source. So you have to make sure that the libraries are on your classpath.</p>
</div>
<div class="paragraph">
<p>The following properties can be set, regardless of whether you are using the JDBC or data source approach:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>databaseType</strong>: it&#8217;s normally not necessary to specify this property as it is automatically detected from the database connection metadata. Should only be specified in case automatic detection fails. Possible values: {h2, mysql, oracle, postgres, mssql, db2}. This setting will determine which create/drop scripts and queries will be used. See <a href="#supporteddatabases">the <em>supported databases</em> section</a> for an overview of which types are supported.</p>
</li>
<li>
<p><strong>databaseSchemaUpdate</strong>: allows you to set the strategy to handle the database schema on process engine boot and shutdown.</p>
<div class="ulist">
<ul>
<li>
<p><code>false</code> (default): Checks the version of the DB schema against the library when the process engine is being created and throws an exception if the versions don&#8217;t match.</p>
</li>
<li>
<p><code>true</code>: Upon building the process engine, a check is performed and an update of the schema is performed if it is necessary. If the schema doesn&#8217;t exist, it is created.</p>
</li>
<li>
<p><code>create-drop</code>: Creates the schema when the process engine is being created and drops the schema when the process engine is being closed.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="jndiDatasourceConfig">2.5. JNDI Datasource Configuration</h3>
<div class="paragraph">
<p>By default, the database configuration for Flowable DMN is contained within the db.properties files in the WEB-INF/classes of each web application. This isn&#8217;t always ideal because it
requires users to either modify the db.properties in the Flowable source and recompile the WAR file, or explode the WAR and modify the db.properties on every deployment.</p>
</div>
<div class="paragraph">
<p>By using JNDI (Java Naming and Directory Interface) to obtain the database connection, the connection is fully managed by the Servlet Container and the configuration can be managed outside the war deployment. This also allows more control over the connection parameters than what is provided by the db.properties file.</p>
</div>
<div class="sect3">
<h4 id="jndi_configuration">2.5.1. Configuration</h4>
<div class="paragraph">
<p>Configuration of the JNDI datasource will differ depending on what servlet container application you are using. The instructions below will work for Tomcat, but for other container applications, please refer to the documentation for your container app.</p>
</div>
<div class="paragraph">
<p>If using Tomcat, the JNDI resource is configured within $CATALINA_BASE/conf/[enginename]/[hostname]/[warname].xml (for the Flowable UI this will usually be $CATALINA_BASE/conf/Catalina/localhost/flowable-app.xml). The default context is copied from the Flowable WAR file when the application is first deployed, so if it already exists, you will need to replace it. To change the JNDI resource so that the application connects to MySQL instead of H2, for example, change the file to the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
    &lt;Context antiJARLocking="true" path="/flowable-app"&gt;
        &lt;Resource auth="Container"
            name="jdbc/flowableDB"
            type="javax.sql.DataSource"
            description="JDBC DataSource"
            url="jdbc:mysql://localhost:3306/flowable"
            driverClassName="com.mysql.jdbc.Driver"
            username="sa"
            password=""
            defaultAutoCommit="false"
            initialSize="5"
            maxWait="5000"
            maxActive="120"
            maxIdle="5"/&gt;
        &lt;/Context&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_jndi_properties">2.5.2. JNDI properties</h4>
<div class="paragraph">
<p>To configure a JNDI Datasource, use the following properties in the properties file for the Flowable UI:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>spring.datasource.jndi-name=: the JNDI name of the Datasource.</p>
</li>
<li>
<p>datasource.jndi.resourceRef: Set whether the lookup occurs in a J2EE container, in other words, if the prefix "java:comp/env/" needs to be added if the JNDI name doesn&#8217;t already contain it. Default is "true".</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="supporteddatabases">2.6. Supported databases</h3>
<div class="paragraph">
<p>Listed below are the types (case sensitive!) that Flowable uses to refer to databases.</p>
</div>
<table id="databaseTypes" class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Flowable DMN database type</th>
<th class="tableblock halign-left valign-top">Example JDBC URL</th>
<th class="tableblock halign-left valign-top">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">h2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">jdbc:h2:tcp://localhost/flowable_dmn</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default configured database</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mysql</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">jdbc:mysql://localhost:3306/flowable_dmn?autoReconnect=true</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tested using mysql-connector-java database driver</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">oracle</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">jdbc:oracle:thin:@localhost:1521:xe</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">postgres</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">jdbc:postgresql://localhost:5432/flowable_dmn</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">db2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">jdbc:db2://localhost:50000/flowable_dmn</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mssql</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">jdbc:sqlserver://localhost:1433;databaseName=flowable_dmn (jdbc.driver=com.microsoft.sqlserver.jdbc.SQLServerDriver) <em>OR</em> jdbc:jtds:sqlserver://localhost:1433/flowable_dmn (jdbc.driver=net.sourceforge.jtds.jdbc.Driver)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tested using Microsoft JDBC Driver 4.0 (sqljdbc4.jar) and JTDS Driver</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="creatingDatabaseTable">2.7. Creating the database tables</h3>
<div class="paragraph">
<p>Flowable DMM uses <a href="http://www.liquibase.org">Liquibase</a> for tracking, managing and applying database schema changes.</p>
</div>
<div class="paragraph">
<p>The easiest way to create the database tables for your database is to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add the flowable-dmn-engine JARs to your classpath</p>
</li>
<li>
<p>Add a suitable database driver</p>
</li>
<li>
<p>Add a Flowable configuration file (<em>flowable.dmn.cfg.xml</em>) to your classpath, pointing to your database (see <a href="#databaseConfiguration">database configuration section</a>)</p>
</li>
<li>
<p>Execute the main method of the <em>DbSchemaCreate</em> class</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="database.tables.explained">2.8. Database table names explained</h3>
<div class="paragraph">
<p>The database names of Flowable DMN all start with <strong>ACT_DMN_</strong>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ACT_DMN_DATABASECHANGELOG: This table is used by Liquibase to track which changesets have been run.</p>
</li>
<li>
<p>ACT_DMN_DATABASECHANGELOGLOCK: This table is used by Liquibase to ensure only one instance of Liquibase is running at a time.</p>
</li>
<li>
<p>ACT_DMN_DECISION_TABLE: This table contains the metadata of the deployed decision tables.</p>
</li>
<li>
<p>ACT_DMN_DEPLOYMENT: This table contains the deployment metadata.</p>
</li>
<li>
<p>ACT_DMN_DEPLOYMENT_RESOURCE: This table contains the DMN definition resource and metadata.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="databaseUpgrade">2.9. Database upgrade</h3>
<div class="paragraph">
<p>Make sure you make a backup of your database (using your database backup capabilities) before you run an upgrade.</p>
</div>
<div class="paragraph">
<p>By default, a version check will be performed each time a process engine is created. This typically happens once at boot time of your application or the Flowable webapps. If the Flowable library notices a difference between the library version and the version of the Flowable database tables, then an exception is thrown.</p>
</div>
<div class="paragraph">
<p>To upgrade, you have to start by putting the following configuration property in your flowable.dmn.cfg.xml configuration file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml">&lt;beans &gt;

  &lt;bean id="dmnEngineConfiguration" class="org.flowable.dmn.engine.impl.cfg.StandaloneDmnEngineConfiguration"&gt;
    &lt;!-- ... --&gt;
    &lt;property name="databaseSchemaUpdate" value="true" /&gt;
    &lt;!-- ... --&gt;
  &lt;/bean&gt;

&lt;/beans&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Also, include a suitable database driver for your database in the classpath.</strong> Upgrade the Flowable DMN libraries in your application. Or start up a new version of Flowable DMN and point it to a database that contains an older version.  With <code>databaseSchemaUpdate</code> set to <code>true</code>, Flowable DMN will automatically upgrade the DB schema to the newer version the first time when it notices that libraries and DB schema are out of sync.</p>
</div>
</div>
<div class="sect2">
<h3 id="processDefinitionCacheConfiguration">2.10. Deployment cache configuration</h3>
<div class="paragraph">
<p>All decisions are cached (after they&#8217;re parsed) to avoid hitting the database every time a decision table is needed and because decision table data doesn&#8217;t change. By default, there is no limit on this cache. To limit the decisions cache, add following property</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml">&lt;property name="decisionCacheLimit" value="10" /&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Setting this property will swap the default hashmap cache with a LRU cache that has the provided hard limit. Of course, the best value for this property depends on the total amount of decisions stored and the number of decisions actually used at runtime.</p>
</div>
<div class="paragraph">
<p>You can also inject your own cache implementation. This must be a bean that implements the org.flowable.dmn.engine.impl.persistence.deploy.DeploymentCache interface:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml">&lt;property name="decisionCache"&gt;
  &lt;bean class="org.flowable.MyCache" /&gt;
&lt;/property&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="strictMode">2.11. Strict mode</h3>
<div class="paragraph">
<p>By default strict mode is <strong>enabled</strong>. This means that the hit policies will act as described in the DMN 1.1 spec.
It is however possible to disable strict mode.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml">&lt;beans&gt;

  &lt;bean id="dmnEngineConfiguration" class="org.flowable.dmn.engine.impl.cfg.StandaloneDmnEngineConfiguration"&gt;
    &lt;!-- ... --&gt;
      &lt;property name="strictMode" value="false"/&gt;
    &lt;!-- ... --&gt;
  &lt;/bean&gt;

&lt;/beans&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The effect will be that a result will not be invalidated when a hit policy constraint is violated. A possible violation will be logged in the audit log as a validation message.</p>
</div>
</div>
<div class="sect2">
<h3 id="_custom_flowable_function_delegates">2.12. Custom Flowable Function Delegates</h3>
<div class="paragraph">
<p>Flowable DMN provides some built-in JUEL Function Delegates. By setting the <strong>customFlowableFunctionDelegates</strong> property on the dmnEngineConfiguration bean you can provide own. These can be used in expressions to execute your own logic.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml">&lt;beans&gt;

  &lt;bean id="dmnEngineConfiguration" class="org.flowable.dmn.engine.impl.cfg.StandaloneDmnEngineConfiguration"&gt;
    &lt;!-- ... --&gt;
    &lt;property name="customFlowableFunctionDelegates"&gt;
      &lt;list&gt;
          &lt;bean ref="myOwnFunctionDelegateOne" /&gt;
          &lt;bean ref="myOwnFunctionDelegateTwo" /&gt;
      &lt;/list&gt;
    &lt;/property&gt;
    &lt;!-- ... --&gt;
  &lt;/bean&gt;

  &lt;bean id="myOwnFunctionDelegateOne" class="org.acme.MyOwnFunctionDelegateOne" /&gt;
  &lt;bean id="myOwnFunctionDelegateTwo" class="org.acme.MyOwnFunctionDelegateTwo" /&gt;

&lt;/beans&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that the custom Function Delegates must extend from org.flowable.engine.common.impl.el.AbstractFlowableFunctionDelegate.</p>
</div>
</div>
<div class="sect2">
<h3 id="loggingConfiguration">2.13. Logging</h3>
<div class="paragraph">
<p>All logging (flowable, spring, mybatis, &#8230;&#8203;) is routed through SLF4J and allows the selection of the logging-implementation of your choice.</p>
</div>
<div class="paragraph">
<p><strong>By default no SFL4J-binding JAR is present in the flowable-engine dependencies; this should be added in your project in order to use the logging framework of your choice.</strong> If no implementation JAR is added, SLF4J will use a NOP-logger, not logging anything at all, other than a warning that nothing will be logged. For more information on these bindings <a href="http://www.slf4j.org/codes.html#StaticLoggerBinder"><a href="http://www.slf4j.org/codes.html#StaticLoggerBinder" class="bare">http://www.slf4j.org/codes.html#StaticLoggerBinder</a></a>.</p>
</div>
<div class="paragraph">
<p>With Maven, for example, add a dependency like this (here using log4j), note that you still need to add a version:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;org.slf4j&lt;/groupId&gt;
  &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The flowable-ui and flowable-rest webapps are configured to use Log4j-binding. Log4j is also used when running the tests for all the flowable-* modules.</p>
</div>
<div class="paragraph">
<p><strong>Important note when using a container with commons-logging in the classpath:</strong> In order to route the spring-logging through SLF4J, a bridge is used (see <a href="http://www.slf4j.org/legacy.html#jclOverSLF4J"><a href="http://www.slf4j.org/legacy.html#jclOverSLF4J" class="bare">http://www.slf4j.org/legacy.html#jclOverSLF4J</a></a>). If your container provides a commons-logging implementation, please follow directions on this page: <a href="http://www.slf4j.org/codes.html#release"><a href="http://www.slf4j.org/codes.html#release" class="bare">http://www.slf4j.org/codes.html#release</a></a> to ensure stability.</p>
</div>
<div class="paragraph">
<p>Example when using Maven (version omitted):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;org.slf4j&lt;/groupId&gt;
  &lt;artifactId&gt;jcl-over-slf4j&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="chapterApi">3. The Flowable DMN API</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="apiEngine">3.1. The DMN Engine API and services</h3>
<div class="paragraph">
<p>The DMN engine API is the most common way of interacting with Flowable DMN. The central starting point is the <code>DmnEngine</code>, which can be created in several ways as described in the  <a href="#configuration">configuration section</a>. From the DmnEngine, you can obtain the various other services.
DmnEngine and the services objects are thread safe. So you can keep a reference to one of those for a whole server.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java">DmnEngine dmnEngine = DmnEngines.getDefaultDmnEngine();
DmnRuleService dmnRuleService = dmnEngine.getDmnRuleService();
DmnRepositoryService dmnRepositoryService = dmnEngine.getDmnRepositoryService();
DmnManagementService dmnManagementService = dmnEngine.getDmnManagementService();</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>DmnEngines.getDefaultDmnEngine()</code> will initialize and build a DMN engine the first time it is called and afterwards always return the same DMN engine. Proper creation and closing of all DMN engines can be done with <code>DMNEngines.init()</code>  and <code>DMNEngines.destroy()</code>.</p>
</div>
<div class="paragraph">
<p>The DmnEngines class will scan for all <code>flowable.dmn.cfg.xml</code> and <code>flowable-dmn-context.xml</code> files. For all <code>flowable.dmn.cfg.xml</code> files, the DMN engine will be built in the typical Flowable way: <code>DmnEngineConfiguration.createDmnEngineConfigurationFromInputStream(inputStream).buildDmnEngine()</code>. For all <code>flowable-dmn-context.xml</code> files, the DMN engine will be built in the Spring way: First the Spring application context is created and then the DMN engine is obtained from that application context.</p>
</div>
<div class="paragraph">
<p>All services are stateless. This means that you can easily run Flowable DMN on multiple nodes in a cluster, each going to the same database, without having to worry about which machine actually executed previous calls. Any call to any service is idempotent, regardless of where it is executed.</p>
</div>
<div class="paragraph">
<p>The <strong>DmnRepositoryService</strong> is probably the first service needed when working with the Flowable DMN engine. This service offers operations for managing and manipulating <code>deployments</code> and <code>DMN definitions</code>. A DMN definition is the root concept of a DMN model (the main concepts of DMN are explained in the &lt;dmn-introduction, DMN introduction section&gt;). It contains the definition of the <code>decision</code> (and its <code>decision table</code>).
A <code>deployment</code> is the unit of packaging within the Flowable DMN engine. A deployment can contain multiple DMN XML files. Deploying a deployment means it is uploaded to the engine, where all DMN definitions are inspected and parsed before being stored in the database. From that point on, the deployment is known to the system and any decision included in the deployment can now be executed.</p>
</div>
<div class="paragraph">
<p>Furthermore, this service allows you to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Query deployments, DMN definitions and decision tables known to the engine.</p>
</li>
<li>
<p>Retrieve a POJO version of the DMN definition or decision table that can be used to introspect using Java rather than XML.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <strong>DmnRuleService</strong> provides methods for executing a decision. By providing parameters and input data, the evaluation of a decision can be started.</p>
</div>
<div class="paragraph">
<p>The <strong>DmnManagementService</strong> is typically not needed when coding custom application using Flowable DMN. It allows you to retrieve information about the engine version, database tables and table metadata.</p>
</div>
<div class="paragraph">
<p>For more detailed information on the service operations and the DMN engine API, see <a href="http://www.flowable.org/docs/javadocs/index.html">the javadocs</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_exception_strategy">3.2. Exception strategy</h3>
<div class="paragraph">
<p>The base exception in Flowable is the <code>org.flowable.engine.FlowableException</code>, an unchecked exception. This exception can be thrown at all times by the API, but <em>expected</em> exceptions that happen in specific methods are documented in <a href="http://www.flowable.org/docs/javadocs/index.html"> the javadocs</a>. For example, an extract from <code>DmnRuleService</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java">/**
  * Execute a decision identified by it's key.
  *
  * @param  decisionKey      the decision key, cannot be null
  * @param  inputVariables   map with input variables
  * @return                  the {@link RuleEngineExecutionResult} for this execution
  * @throws FlowableObjectNotFoundException
  *            when the decision with given key does not exist.
  * @throws FlowableException
  *           when an error occurs while executing the decision.
  */
RuleEngineExecutionResult executeDecisionByKey(String decisionKey, Map&lt;String, Object&gt; inputVariables);</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the example above, when a key is passed for which no decisions exist, an exception will be thrown. Also, as the javadoc <strong>explicitly states that decisionKey cannot be null, a <code>FlowableIllegalArgumentException</code> will be thrown when <code>null</code> is passed</strong>.</p>
</div>
<div class="paragraph">
<p>Even though we want to avoid a big exception hierarchy, the following subclasses are thrown in specific cases. All other errors that occur during process-execution or API-invocation that don&#8217;t fit into the possible exceptions below are thrown as regular <code>FlowableExceptions</code>s.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>FlowableOptimisticLockingException</code>: Thrown when an optimistic lock occurs in the data store caused by concurrent access of the same data entry.</p>
</li>
<li>
<p><code>FlowableClassLoadingException</code>: Thrown when a class requested to load was not found or when an error occurred while loading it.</p>
</li>
<li>
<p><code>FlowableObjectNotFoundException</code>: Thrown when an object that is requested or acted on does not exist.</p>
</li>
<li>
<p><code>FlowableIllegalArgumentException</code>: An exception indicating that an illegal argument has been supplied in a Flowable DMN API call, an illegal value was configured in the engine&#8217;s configuration or an illegal value has been supplied.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="queryAPI">3.3. Query API</h3>
<div class="paragraph">
<p>There are two ways of querying data from the engine: the query API and native queries. The Query API allows to program completely typesafe queries with a fluent API. You can add various conditions to your queries (all of which are applied together as a logical AND) and precisely one ordering. The following code shows an example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java">List&lt;DmnDeployment&gt; dmnDeployments = dmnRepositoryService.createDeploymentQuery()
    .deploymentNameLike("deployment%")
    .orderByDeployTime()
    .list();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Sometimes you need more powerful queries, for example, queries using an OR operator or restrictions you cannot express using the Query API. For these cases, we introduced native queries, which allow you to write your own SQL queries. The return type is defined by the Query object you use and the data is mapped into the correct objects, such as Deployment, ProcessInstance, Execution, and so on. As the query will be fired at the database, you have to use table and column names as they are defined in the database; this requires some knowledge about the internal data structure and it&#8217;s recommended you use native queries with care. The table names can be retrieved through the API to keep the dependency as small as possible.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java">long count = dmnRepositoryService.createNativeDeploymentQuery()
    .sql("SELECT count(*) FROM " + dmnManagementService.getTableName(DmnDeploymentEntity.class) + " D1, "
        + dmnManagementService.getTableName(DecisionTableEntity.class) + " D2 "
        + "WHERE D1.ID_ = D2.DEPLOYMENT_ID_ "
        + "AND D1.ID_ = #{deploymentId}")
    .parameter("deploymentId", deployment.getId())
    .count();</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="apiUnitTesting">3.4. Unit testing</h3>
<div class="paragraph">
<p>As Flowable DMN is an embeddable Java engine, writing unit tests for DMN definitions is as simple as writing regular unit tests.</p>
</div>
<div class="paragraph">
<p>Flowable supports the JUnit version 4 and 5 style of unit testing.</p>
</div>
<div class="paragraph">
<p>In the JUnit 5 style one needs to use the <code>org.flowable.dmn.engine.test.FlowableDmnTest</code> annotation
or register the <code>org.flowable.dmn.engine.test.FlowableDmnExtension</code> manually.
The <code>FlowableDmnTest</code> annotation is just a meta annotation and the does the registration of the <code>FlowableDmnExtension</code>
(i.e. it does <code>@ExtendWith(FlowableDmnExtension.class)</code>).
This will make the DmnEngine and the services available as parameters into the test and lifecycle methods
(<code>@BeforeAll</code>, <code>@BeforeEach</code>, <code>@AfterEach</code>, <code>@AfterAll</code>).
Before each test the dmnEngine will be initialized by default with the <code>flowable.dmn.cfg.xml</code> resource on the classpath.
In order to specify a different configuration file the <code>org.flowable.dmn.engine.test.DmnConfigurationResource</code>
annotation needs to be used (see second example).
Dmn engines are cached statically over multiple unit tests when the configuration resource is the same.</p>
</div>
<div class="paragraph">
<p>By using <code>FlowableDmnExtension</code>, you can annotate test methods with <code>org.flowable.dmn.engine.test.DmnDeployment</code>
or <code>org.flowable.dmn.engine.test.DmnDeploymentAnnotation</code>.
If both <code>@DmnDeployment</code> and <code>@DmnDeploymentAnnotatio</code> are used then the <code>@DmnDeployment</code>
takes precedence and <code>@DmnDeploymentAnnotation</code> will be ignored.
When a test method is annotated with <code>@DmnDeployment</code>,
before each test the dmn files defined in <code>DmnDeployment#resources</code> will be deployed.
In case there are no resources defined, a resource file of the form <code>testClassName.testMethod.dmn</code>
in the same package as the test class, will be deployed.
At the end of the test, the deployment will be deleted, including all related dmn definitions, executions, and so on.
See the <code>DmnDeployment</code> class for more information.</p>
</div>
<div class="paragraph">
<p>Taking all that in account, a JUnit 5 test looks as follows:</p>
</div>
<div class="listingblock">
<div class="title">JUnit 5 test with default resource</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java">@FlowableDmnTest
class MyDecisionTableTest {

  @Test
  @DmnDeploymentAnnotation
  void simpleDmnTest(DmnEngine dmnEngine) {
    DmnRuleService dmnRuleService = dmnEngine.getDmnRuleService();

    Map&lt;String, Object&gt; executionResult = ruleService.createExecuteDecisionBuilder()
            .decisionKey("extensionUsage")
            .variable("inputVariable1", 2)
            .variable("inputVariable2", "test2")
            .executeWithSingleResult();

    Assertions.assertThat(executionResult).containsEntry("output1", "test1");
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>With JUnit 5 you can also inject the id of the deployment (with +org.flowable.dmn.engine.test.DmnDeploymentId+_) into your test and lifecycle methods.</pre>
</div>
</div>
<div class="listingblock">
<div class="title">JUnit 5 test with custom resource</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java">@FlowableDmnTest
@DmnConfigurationResource("flowable.custom.dmn.cfg.xml")
class MyDecisionTableTest {

  @Test
  @DmnDeploymentAnnotation
  void simpleDmnTest(DmnEngine dmnEngine) {
    DmnRuleService dmnRuleService = dmnEngine.getDmnRuleService();

    Map&lt;String, Object&gt; executionResult = ruleService.createExecuteDecisionBuilder()
            .decisionKey("extensionUsage")
            .variable("inputVariable1", 2)
            .variable("inputVariable2", "test2")
            .executeWithSingleResult();

    Assertions.assertThat(executionResult).containsEntry("output1", "test1");
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>When writing JUnit 4 unit tests, the <code>org.flowable.dmn.engine.test.FlowableDmnRule</code> Rule can be used. Through this rule, the DMN engine and services are available through getters. Including this <code>Rule</code> will enable the use of the <code>org.flowable.dmn.engine.test.DmnDeploymentAnnotation</code> annotation (see above for an explanation of its use and configuration) and it will look for the default configuration file on the classpath. DMN engines are statically cached over multiple unit tests when using the same configuration resource.
It&#8217;s also possible to provide a custom engine configuration to the rule.</p>
</div>
<div class="paragraph">
<p>The following code snippet shows an example of using the JUnit 4 style of testing and the usage of the <code>FlowableDmnRule</code> (and passing an optional custom configuration):</p>
</div>
<div class="listingblock">
<div class="title">JUnit 4 test</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java">public class MyDecisionTableTest {

  @Rule
  public FlowableDmnRule flowableDmnRule = new FlowableDmnRule("custom1.flowable.dmn.cfg.xml");

  @Test
  @DmnDeploymentAnnotation
  public void ruleUsageExample() {
    DmnEngine dmnEngine = flowableDmnRule.getDmnEngine();
    DmnRuleService dmnRuleService = dmnEngine.getDmnRuleService();

    Map&lt;String, Object&gt; executionResult = ruleService.createExecuteDecisionBuilder()
            .decisionKey("extensionUsage")
            .variable("inputVariable1", 2)
            .variable("inputVariable2", "test2")
            .executeWithSingleResult();

    Assertions.assertThat(executionResult).containsEntry("output1", "test1");
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="apiProcessEngineInWebApp">3.5. The DMN engine in a web application</h3>
<div class="paragraph">
<p>The <code>DmnEngine</code> is a thread-safe class and can easily be shared among multiple threads. In a web application, this means it is possible to create the DMN engine once when the container boots and shut down the engine when the container goes down.</p>
</div>
<div class="paragraph">
<p>The following code snippet shows how you can write a simple <code>ServletContextListener</code> to initialize and destroy process engines in a plain Servlet environment:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java">public class DmnEnginesServletContextListener implements ServletContextListener {

  public void contextInitialized(ServletContextEvent servletContextEvent) {
    DmnEngines.init();
  }

  public void contextDestroyed(ServletContextEvent servletContextEvent) {
    DmnEngines.destroy();
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>contextInitialized</code> method will delegate to <code>DmnEngines.init()</code>. This will look for <code>flowable.dmn.cfg.xml</code> resource files on the classpath, and create a <code>DmnEngine</code> for the given configurations (for example, multiple JARs with a configuration file). If you have multiple such resource files on the classpath, make sure they all have different names. When the DMN engine is needed, it can be fetched using:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java">DmnEngines.getDefaultDmnEngine()</code></pre>
</div>
</div>
<div class="paragraph">
<p>or:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java">DmnEngines.getDmnEngine("myName");</code></pre>
</div>
</div>
<div class="paragraph">
<p>Of course, it&#8217;s also possible to use any of the variants of creating a DMN engine,
as described in the <a href="#configuration">configuration section</a>.</p>
</div>
<div class="paragraph">
<p>The <code>contextDestroyed</code> method of the context-listener delegates to <code>DmnEngines.destroy()</code>. That will properly close all initialized DMN engines.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="springintegration">4. Spring integration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>While you can definitely use Flowable DMN without Spring, we&#8217;ve provided some very nice integration features that are explained in this chapter.</p>
</div>
<div class="sect2">
<h3 id="_dmnenginefactorybean">4.1. DmnEngineFactoryBean</h3>
<div class="paragraph">
<p>The <code>DmnEngine</code> can be configured as a regular Spring bean. The starting point of the integration is the class <code>org.flowable.dmn.spring.DmnEngineFactoryBean</code>. This bean takes a DMN engine configuration and creates the DMN engine.  This means that the creation and configuration of properties for Spring is the same as documented in the <a href="#configuration">configuration section</a>. For Spring integration, the configuration and engine beans will look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml">&lt;bean id="dmnEngineConfiguration" class="org.flowable.dmn.spring.SpringDmnEngineConfiguration"&gt;
    ...
&lt;/bean&gt;

&lt;bean id="dmnEngine" class="org.flowable.dmn.spring.DmnEngineFactoryBean"&gt;
  &lt;property name="dmnEngineConfiguration" ref="dmnEngineConfiguration" /&gt;
&lt;/bean&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that the <code>dmnEngineConfiguration</code> bean now uses the <code>org.flowable.dmn.spring.SpringDmnEngineConfiguration</code> class.</p>
</div>
</div>
<div class="sect2">
<h3 id="_automatic_resource_deployment">4.2. Automatic resource deployment</h3>
<div class="paragraph">
<p>Spring integration also has a special feature for deploying resources.  In the DMN engine configuration, you can specify a set of resources. When the DMN engine is created, all these resources will be scanned and deployed.  There is filtering in place that prevents duplicate deployments.  Only when the resources have actually changed will new deployments be deployed to the Flowable DMN DB. This makes sense in a lot of use case, where the Spring container is rebooted often (for example, testing).</p>
</div>
<div class="paragraph">
<p>Here&#8217;s an example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml">&lt;bean id="dmnEngineConfiguration" class="org.flowable.spring.SpringDmnEngineConfiguration"&gt;
  ...
  &lt;property name="deploymentResources"
    value="classpath*:/org/flowable/spring/test/autodeployment/autodeploy/decision*.dmn" /&gt;
&lt;/bean&gt;

&lt;bean id="dmnEngine" class="org.flowable.dmn.spring.DmnEngineFactoryBean"&gt;
  &lt;property name="dmnEngineConfiguration" ref="dmnEngineConfiguration" /&gt;
&lt;/bean&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>By default, the configuration above will group all of the resources matching the filtering into a single deployment to the Flowable DMN engine. The duplicate filtering to prevent re-deployment of unchanged resources applies to the whole deployment. In some cases, this may not be what you want. For instance, if you deploy a set of DMN resources this way, and only a single
 DMN definition in those resources has changed, the deployment as a whole will be considered new and all of the process definitions in that deployment will be re-deployed, resulting in new versions of each of the DMN definitions, even though only one was actually changed.</p>
</div>
<div class="paragraph">
<p>To be able to customize the way deployments are determined, you can specify an additional property in the <code>SpringDmnEngineConfiguration</code>, <code>deploymentMode</code>. This property defines the way deployments will be determined from the set of resources that match the filter. There are three values that are supported by default for this property:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>default</code>: Group all resources into a single deployment and apply duplicate filtering to that deployment. This is the default value and it will be used if you don&#8217;t specify a value.</p>
</li>
<li>
<p><code>single-resource</code>: Create a separate deployment for each individual resource and apply duplicate filtering to that deployment. This is the value you would use to have each DMN definition be deployed separately and only create a new DMN definition version if it has changed.</p>
</li>
<li>
<p><code>resource-parent-folder</code>: Create a separate deployment for resources that share the same parent folder and apply duplicate filtering to that  deployment. This value can be used to create separate deployments for most resources, but still be able to group some by placing them in a shared folder. Here&#8217;s an example of how to specify the <code>single-resource</code> configuration for <code>deploymentMode</code>:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml">&lt;bean id="dmnEngineConfiguration"
    class="org.flowable.dmn.spring.SpringDmnEngineConfiguration"&gt;
  ...
  &lt;property name="deploymentResources" value="classpath*:/flowable/*.dmn" /&gt;
  &lt;property name="deploymentMode" value="single-resource" /&gt;
&lt;/bean&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In addition to using the values listed above for <code>deploymentMode</code>, you may want customized behavior towards determining deployments. If so, you can create a subclass of <code>SpringDmnEngineConfiguration</code> and override the <code>getAutoDeploymentStrategy(String deploymentMode)</code> method.  This method determines which deployment strategy is used for a certain value of the <code>deploymentMode</code> configuration.</p>
</div>
</div>
<div class="sect2">
<h3 id="springUnitTest">4.3. Unit testing</h3>
<div class="paragraph">
<p>When integrating with Spring, decisions can be tested very easily using the standard <a href="#apiUnitTesting">Flowable testing facilities</a>.
The following examples show how a decision is tested in typical Spring-based JUnit 4 and 5 tests:</p>
</div>
<div class="listingblock">
<div class="title">JUnit 5 test</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java">@ExtendWith(FlowableDmnSpringExtension.class)
@ExtendWith(SpringExtension.class)
@ContextConfiguration(classes = DmnSpringJunitJupiterTest.TestConfiguration.class)
public class SpringJunit4Test {

    @Autowired
    private DmnEngine dmnEngine;

    @Autowired
    private DmnRuleService ruleService;

    @Test
    @DmnDeploymentAnnotation
    public void simpleDecisionTest() {
        Map&lt;String, Object&gt; executionResult = ruleService.createExecuteDecisionBuilder()
            .decisionKey("extensionUsage")
            .variable("inputVariable1", 2)
            .variable("inputVariable2", "test2")
            .executeWithSingleResult();

        Assertions.assertThat(executionResult).containsEntry("output1", "test1");
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">JUnit 4 test</div>
<div class="content">
<pre class="pygments highlight"><code data-lang="java">@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration("classpath:org/flowable/spring/test/junit4/springTypicalUsageTest-context.xml")
public class SpringJunit4Test {

    @Autowired
    private DmnEngine dmnEngine;

    @Autowired
    private DmnRuleService ruleService;

    @Autowired
    @Rule
    public FlowableDmnRule flowableSpringRule;

    @Test
    @DmnDeploymentAnnotation
    public void simpleDecisionTest() {
        Map&lt;String, Object&gt; executionResult = ruleService.createExecuteDecisionBuilder()
                .decisionKey("extensionUsage")
                .variable("inputVariable1", 2)
                .variable("inputVariable2", "test2")
                .executeWithSingleResult();

        Assertions.assertThat(executionResult).containsEntry("output1", "test1");
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that for this to work, you need to define an <em>org.flowable.dmn.engine.test.FlowableDmnRule</em> bean in the Spring configuration (which is injected by auto-wiring in the example above).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml">&lt;bean id="flowableDmnRule" class="org.flowable.dmn.engine.test.FlowableDmnRule"&gt;
    &lt;property name="dmnEngine" ref="dmnEngine"/&gt;
&lt;/bean&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="chDeployment">5. Deployment</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_dmn_definitions">5.1. DMN Definitions</h3>
<div class="paragraph">
<p>DMN Definitions with <code>.dmn</code> extension can be deployed to the DMN engine.</p>
</div>
<div class="paragraph">
<p>When the DMN engine is plugged into the Process engine, the DMN definitions can be packed into a business archive (BAR) together with other process related resources. The Process engine deployment service will take care of deploying the DMN resources to the DMN engine.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Java classes used for custom expression functions present in the business archive <strong>will not be added to the classpath</strong>. All custom classes used in expressions in decisions in the business archive should be present on the Flowable (DMN) Engine classpath in order to run the decisions.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_dmn_definitions_decisions_and_decision_tables">5.1.1. DMN Definitions, decisions and decision tables</h4>
<div class="paragraph">
<p>A DMN definition consists, amongst other things, of decisions. A decision has one expression. The DMN spec describes several types of expressions. Currently in Flowable DMN we support the decision table type of expression.
When deploying a DMN definition, every decision, which can contain one <strong>decision table</strong>, is inserted separately into the ACT_DMN_DECISION table.</p>
</div>
</div>
<div class="sect3">
<h4 id="_deploying_programmatically">5.1.2. Deploying programmatically</h4>
<div class="paragraph">
<p>Deploying a DMN definition can be done like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java">String dmnDefinition = "path/to/definition-one.dmn";
ZipInputStream inputStream = new ZipInputStream(new FileInputStream(barFileName));

repositoryService.createDeployment()
    .name("definition-one")
    .addClasspathResource(dmnDefinition)
    .deploy();</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_java_classes">5.1.3. Java classes</h4>
<div class="paragraph">
<p>All classes that contain the custom expression functions that are used in your decisions should be present on the engine&#8217;s classpath when a decision is executed.</p>
</div>
<div class="paragraph">
<p>During deployment of a DMN definition, however, these classes don&#8217;t have to be present on the classpath.</p>
</div>
<div class="paragraph">
<p>When you are using the demo setup and you want to add your custom classes, you should add a JAR containing your classes to the flowable-ui-app or flowable-app-rest webapp lib. Don&#8217;t forget to include the dependencies of your custom classes (if any) as well. Alternatively, you can include your dependencies in the libraries directory of your Tomcat installation, <code>${tomcat.home}/lib</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_creating_a_single_app">5.1.4. Creating a single app</h4>
<div class="paragraph">
<p>Instead of making sure that all DMN engines have all the delegation classes on their classpath and use the right Spring configuration, you may consider including the flowable-rest webapp inside your own webapp so that there is only a single <code>DmnEngine</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="versioningOfDMNDefinitions">5.2. Versioning of DMN decisions</h3>
<div class="paragraph">
<p>DMN doesn&#8217;t have a notion of versioning.  That is actually good, because the executable DMN definition file will probably live in a version control system repository (such as Subversion, Git or Mercurial) as part of your development project.  Versions of DMN decisions are created during deployment. During deployment, Flowable will assign a version to the <code>decision</code> before it&#8217;s stored in the Flowable DB.</p>
</div>
<div class="paragraph">
<p>For each DMN decision in a DMN definition, the following steps are performed to initialize the properties <code>key</code>, <code>version</code>, <code>name</code> and <code>id</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The decision <code>id</code> attribute in the definition XML file is used as the decision table <code>key</code> property.</p>
</li>
<li>
<p>The decision <code>name</code> attribute in the XML file is used as the decision table <code>name</code> property.</p>
</li>
<li>
<p>The first time a decision with a particular key is deployed, version 1 is assigned.  For all subsequent deployments of decisions with the same key, the version will be set 1 higher than the maximum currently deployed version. The key property is used to distinguish decisions.</p>
</li>
<li>
<p>The id property is a unique number to guarantee uniqueness of the decision table identifier for the decision table caches in a clustered environment.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Take for example the following process:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml">&lt;definitions id="myDefinitions" &gt;
  &lt;decision id="myDecision" name="My important decision" &gt;
    &lt;decisionTable id="decisionTable1" hitPolicy="FIRST" &gt;
    ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>When deploying this decision, the decision table in the database will look like this:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">id</th>
<th class="tableblock halign-left valign-top">key</th>
<th class="tableblock halign-left valign-top">name</th>
<th class="tableblock halign-left valign-top">version</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">e29d4126-ed4d-11e6-9e00-7282cbd6ce64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">myDecision</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">My important decision</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Suppose we now deploy an updated version of the same process (for example, changing some user tasks), but the <code>id</code> of the process definition remains the same. The process definition table will now contain the following entries:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">id</th>
<th class="tableblock halign-left valign-top">key</th>
<th class="tableblock halign-left valign-top">name</th>
<th class="tableblock halign-left valign-top">version</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">e29d4126-ed4d-11e6-9e00-7282cbd6ce64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">myDecision</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">My important decision</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">e9c2a6c0-c085-11e6-9096-6ab56fad108a</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">myDecision</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">My important decision</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>When the <code>dmnRuleService.executeDecisionByKey("myDecision")</code> is called, it will now use the decision definition with version <code>2</code>, as this is the latest version of the decision definition.</p>
</div>
<div class="paragraph">
<p>If we create a second decision, as defined below and deploy this to Flowable DMN, a third row will be added to the table.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml">&lt;definitions id="myNewDefinitions" &gt;
  &lt;decision id="myNewDecision" name="My important decision" &gt;
    &lt;decisionTable id="decisionTable1" hitPolicy="FIRST" &gt;
      ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>The table will look like this:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">id</th>
<th class="tableblock halign-left valign-top">key</th>
<th class="tableblock halign-left valign-top">name</th>
<th class="tableblock halign-left valign-top">version</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">e29d4126-ed4d-11e6-9e00-7282cbd6ce64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">myDecision</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">My important decision</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">e9c2a6c0-c085-11e6-9096-6ab56fad108a</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">myDecision</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">My important decision</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">d317d3f7-e948-11e6-9ce6-b28c070b517d</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">myNewDecision</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">My important decision</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Note how the key for the new decision is different from our first decision. Even though the name is the same (we should probably have changed that too), Flowable DMN only considers the <code>id</code> attribute when distinguishing decisions. The new decision is therefore deployed with version 1.</p>
</div>
</div>
<div class="sect2">
<h3 id="deploymentCategory">5.3. Category</h3>
<div class="paragraph">
<p>Both DMN deployments and decision tables can have user defined categories.
The deployment category can be specified in the API like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java">dmnRepository
    .createDeployment()
    .category("yourCategory")
    ...
    .deploy();</code></pre>
</div>
</div>
<div class="paragraph">
<p>The decision table category can be specified in the API like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java">dmnRepository.setDecisionTableCategory("e9c2a6c0-c085-11e6-9096-6ab56fad108a", "yourCategory");</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="bpmn20">6. DMN 1.1 Introduction</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="whatIsDmn">6.1. What is DMN?</h3>
<div class="paragraph">
<p>Decision Model and Notation (DMN) is a standard published by the <a href="http://www.omg.org/spec/DMN/1.1">Object Management Group</a>. It&#8217;s a standard approach for describing and modeling repeatable decisions within organizations to ensure that decision models are interchangeable across organizations.</p>
</div>
</div>
<div class="sect2">
<h3 id="dmnDefiningDecision">6.2. What is a DMN definition</h3>
<div class="paragraph">
<p>The root element of the DMN 1.1 schema is a <strong>definitions</strong> element. Within this element multiple decision definitions can be defined (although we advise you to
have only one process definition in each file, as this simplifies maintenance later in the development process). Within each decision, one expression can be defined. There are several types of expressions. Within Flowable, currently, the expression type <strong>decision table</strong> is supported.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml">&lt;definitions xmlns="http://www.omg.org/spec/DMN/20151101"
  namespace="http://www.flowable.org/dmn"
  name="DetermineDiscount"&gt;

  &lt;decision id="DET_DISC_1" name="DetermineDiscount"&gt;

    &lt;decisionTable id="determineDiscountTable1" hitPolicy="FIRST"&gt;
      ..
    &lt;/decisionTable&gt;

  &lt;/decision&gt;

&lt;/definitions&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_creating_a_dmn_definition">6.3. Creating a DMN definition</h3>
<div class="paragraph">
<p>It&#8217;s possible to create a DMN Definition with a plain text editor, but for this example we&#8217;ll start by using the decision table editor included in the Flowable modeler.</p>
</div>
<div class="paragraph">
<p>We&#8217;ll implement a very simple use case: determining the discount percentage based on a customer category.</p>
</div>
<div class="paragraph">
<p>Start by opening the decision tables section within the Flowable modeler.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/decision_tables_1.png" alt="decision tables 1">
</div>
</div>
<div class="paragraph">
<p>And select <strong>Create Decision Table</strong>.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/decision_tables_2.png" alt="decision tables 2">
</div>
</div>
<div class="paragraph">
<p>Provide a decision table name and a unique decision table key and select <strong>Create new decision table</strong>.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/decision_tables_3.png" alt="decision tables 3">
</div>
</div>
<div class="paragraph">
<p>You&#8217;re now ready to define your decision table. Let&#8217;s describe what is presented within the editor.</p>
</div>
<div class="sect3">
<h4 id="_hit_policy">6.3.1. Hit Policy</h4>
<div class="paragraph">
<p>In the top left corner you can select a <strong>hit policy</strong>.</p>
</div>
<div class="paragraph">
<p>There are 7 hit policies available;</p>
</div>
<div class="paragraph">
<p><strong>single hit</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>F</strong>IRST: multiple (overlapping) rules can match, with different output entries. The first hit by rule order is returned (and evaluation can halt).</p>
</li>
<li>
<p><strong>U</strong>NIQUE: no overlap is possible and all rules are disjoint. Only a single rule can be matched.</p>
</li>
<li>
<p><strong>A</strong>NY: there may be overlap, but all of the matching rules show equal output entries for each output, so any match can be used. If the output entries are non-equal, the hit policy is incorrect and the result will be empty and marked as failed. When <a href="#strictMode">strict mode</a> is disabled the last valid rule be the result. (The violation will be present as a validation message)</p>
</li>
<li>
<p><strong>P</strong>RIORITY: multiple rules can match, with different output entries. This policy returns the matching rule with the highest output priority. Output priorities are specified in the ordered list of output values, in decreasing order of priority.
When <a href="#strictMode">strict mode</a> is disabled and there are no output values defined the first valid rule be the result. (The violation will be present as a validation message)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>multiple hit</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>O</strong>UTPUT ORDER: returns all hits in decreasing output priority order. Output priorities are specified in the ordered list of output values in decreasing order of priority.</p>
</li>
<li>
<p><strong>R</strong>ULE ORDER: returns all hits in rule order.</p>
</li>
<li>
<p><strong>C</strong>OLLECT: returns all hits in arbitrary order. An operator (+, &lt;, &gt;, #) can be added to apply a simple function to the outputs. If no operator is present, the result is the list of all the output entries.</p>
<div class="ulist">
<ul>
<li>
<p>+ (sum): the result of the decision table is the sum of all the distinct outputs.</p>
</li>
<li>
<p>&lt; (min): the result of the decision table is the smallest value of all the outputs.</p>
</li>
<li>
<p>&gt; (max): the result of the decision table is the largest value of all the outputs.</p>
</li>
<li>
<p># (count): the result of the decision table is the number of distinct outputs.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_input_and_output_expressions">6.3.2. Input and Output expressions</h4>
<div class="paragraph">
<p>The header of the decision table itself is divided in two sections; blue and green. In the blue section are the <strong>input expressions</strong>; the green the <strong>output expressions</strong>.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/decision_tables_4.png" alt="decision tables 4">
</div>
</div>
<div class="paragraph">
<p>Within an input expression, you can define the variable that will be used in the expression of the rule input entries (explained below). It&#8217;s possible to define multiple input expressions by selecting <strong>Add Input</strong> (right click option menu or by clicking the plus icon).</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/decision_tables_5.png" alt="decision tables 5">
</div>
</div>
<div class="paragraph">
<p>Within an output expression, you can define what variable will be created to form the result of a decision table execution (the value of the variable will be determined by the output entry expression; explained below). It&#8217;s possible to define multiple output expressions by selecting <strong>Add Output</strong> (right click option menu or by clicking the plus icon).</p>
</div>
</div>
<div class="sect3">
<h4 id="_rules">6.3.3. Rules</h4>
<div class="paragraph">
<p>Each rule consists of one or more input entries and one or more output entries.
A input entry is an expression that will be evaluated against the input variable (of that <em>column</em>). When all input entries are evaluated to be true the rule is considered true, and the output entry is evaluated.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The DMN specification defines an expression language: (S)-FEEL. Currently, we do not supported this part of the specification. Within Flowable DMN, we use JUEL as the expression language.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/decision_tables_6.png" alt="decision tables 6">
</div>
</div>
<div class="paragraph">
<p>To enter an expression, double-click on the corresponding cell.
In this example, the expression <em>== BRONZE</em> is entered. Combined with the variable defined in the corresponding input expression (column header), this will result at runtime in the full expression <em>customerCat == "BRONZE"</em>.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/decision_tables_7.png" alt="decision tables 7">
</div>
</div>
<div class="paragraph">
<p>To enter an output expression, double-click the corresponding cell.
In this example the expression <em>5</em> is entered. This is actually more like an implicit assignment. The value 5 will be assigned to the variable in the corresponding output entry (column) when all input entries of that rule are evaluated true.</p>
</div>
<div class="paragraph">
<p>We can then continue completing the decision table by adding more rules (by selecting Add Rule).</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/decision_tables_8.png" alt="decision tables 8">
</div>
</div>
<div class="paragraph">
<p>In our example, rule 4 has an empty input entry. Empty input entries will be evaluated by the engine as true. This means that if none of the other rules are valid, the outcome of rule 4 will be the output of this decision table. In this case, variable <strong>discountPerc</strong> will have value <strong>0</strong>.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/decision_tables_9.png" alt="decision tables 9">
</div>
</div>
<div class="paragraph">
<p>The decision table can now be saved. Provide a unique Decision Table key.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_use_in_a_bpmn2_0_process">6.4. Use in a BPMN2.0 process</h3>
<div class="paragraph">
<p>The newly created decision table can be used in a BPMN2.0 process by including a <strong>Decision task</strong> and selecting the <strong>Decision table reference</strong>.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="images/decision_tables_10.png" alt="decision tables 10">
</div>
</div>
<div class="paragraph">
<p>In the process above, the process has a start form that will provide the <strong>customer category</strong> to the process instance (and thus to the decision table).
The <strong>Display Discount</strong> user task displays the result of the decision table with an expression form field, using the expression; ${discountperc}.</p>
</div>
</div>
<div class="sect2">
<h3 id="_dmn_1_1_xml">6.5. DMN 1.1 XML</h3>
<div class="paragraph">
<p>The full DMN 1.1 XML of the example above.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml">&lt;definitions xmlns="http://www.omg.org/spec/DMN/20151101" id="definition_78d09dd7-374c-11e8-b5d8-0242ac120005" name="Determine Discount" namespace="http://www.flowable.org/dmn"&gt;
  &lt;decision id="DET_DISC_1" name="Determine Discount"&gt;
    &lt;decisionTable id="decisionTable_78d09dd7-374c-11e8-b5d8-0242ac120005" hitPolicy="UNIQUE"&gt;
      &lt;input label="Customer Category"&gt;
        &lt;inputExpression id="inputExpression_1" typeRef="string"&gt;
          &lt;text&gt;customerCat&lt;/text&gt;
        &lt;/inputExpression&gt;
        &lt;inputValues&gt;
          &lt;text&gt;"BRONZE","SILVER","GOLD"&lt;/text&gt;
        &lt;/inputValues&gt;
      &lt;/input&gt;
      &lt;output id="outputExpression_2" label="Discount Percentage" name="discountPerc" typeRef="number"&gt;
        &lt;outputValues&gt;
          &lt;text&gt;"0","5","10","20"&lt;/text&gt;
        &lt;/outputValues&gt;
      &lt;/output&gt;
      &lt;rule&gt;
        &lt;inputEntry id="inputEntry_1_1"&gt;
          &lt;text&gt;&lt;![CDATA[== "BRONZE"]]&gt;&lt;/text&gt;
        &lt;/inputEntry&gt;
        &lt;outputEntry id="outputEntry_2_1"&gt;
          &lt;text&gt;&lt;![CDATA[5]]&gt;&lt;/text&gt;
        &lt;/outputEntry&gt;
      &lt;/rule&gt;
      &lt;rule&gt;
        &lt;inputEntry id="inputEntry_1_2"&gt;
          &lt;text&gt;&lt;![CDATA[== "SILVER"]]&gt;&lt;/text&gt;
        &lt;/inputEntry&gt;
        &lt;outputEntry id="outputEntry_2_2"&gt;
          &lt;text&gt;&lt;![CDATA[10]]&gt;&lt;/text&gt;
        &lt;/outputEntry&gt;
      &lt;/rule&gt;
      &lt;rule&gt;
        &lt;inputEntry id="inputEntry_1_3"&gt;
          &lt;text&gt;&lt;![CDATA[== "GOLD"]]&gt;&lt;/text&gt;
        &lt;/inputEntry&gt;
        &lt;outputEntry id="outputEntry_2_3"&gt;
          &lt;text&gt;&lt;![CDATA[20]]&gt;&lt;/text&gt;
        &lt;/outputEntry&gt;
      &lt;/rule&gt;
      &lt;rule&gt;
        &lt;inputEntry id="inputEntry_1_4"&gt;
          &lt;text&gt;&lt;![CDATA[-]]&gt;&lt;/text&gt;
        &lt;/inputEntry&gt;
        &lt;outputEntry id="outputEntry_2_4"&gt;
          &lt;text&gt;&lt;![CDATA[0]]&gt;&lt;/text&gt;
        &lt;/outputEntry&gt;
      &lt;/rule&gt;
    &lt;/decisionTable&gt;
  &lt;/decision&gt;
&lt;/definitions&gt;</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Important to note here, is that the decision table key used in Flowable is the decision ID in the DMN XML. *</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="restApiChapter">7. DMN REST API</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_general_flowable_rest_principles">7.1. General Flowable REST principles</h3>
<div class="sect3">
<h4 id="_installation_and_authentication">7.1.1. Installation and Authentication</h4>
<div class="paragraph">
<p>Flowable includes a REST API to the Flowable engine that can be installed by deploying the flowable-rest.war file to a servlet container like Apache Tomcat. However, it can also be used in another web-application by including the servlet (and/or its mappings) in your application and add all flowable-rest dependencies to the classpath.</p>
</div>
<div class="paragraph">
<p>By default the Flowable engine will connect to an in-memory H2 database. You can change the database settings in the flowable-app.properties file in the <em>WEB-INF/META-INF/flowable-app</em> folder. The REST API uses JSON format (<a href="http://www.json.org" class="bare">http://www.json.org</a>) and is built upon the Spring MVC (<a href="http://docs.spring.io/spring/docs/current/spring-framework-reference/html/mvc.html" class="bare">http://docs.spring.io/spring/docs/current/spring-framework-reference/html/mvc.html</a>).</p>
</div>
<div class="paragraph">
<p>All REST-resources require a valid user with the <em>rest-access-api</em> privilege to be authenticated by default. If any valid user should be able to call the REST API, the <em>flowable.rest.app.authentication-mode</em> can be set to <em>any-user</em> (this was the default in older versions of Flowable).</p>
</div>
<div class="paragraph">
<p>A default user that can access the REST API can be configured by settings the following properties:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>flowable.rest.app.admin.user-id=rest-admin
flowable.rest.app.admin.password=test
flowable.rest.app.admin.first-name=Rest
flowable.rest.app.admin.last-name=Admin</pre>
</div>
</div>
<div class="paragraph">
<p>When the REST app boots up, the user is created if it doesn&#8217;t exist or fetched otherwise. This user will be given the <em>access-rest-api</em> privilege which is needed by default to access the REST API. <strong>Do not forget to change the password of this user afterwards</strong>. If the <em>flowable.rest.app.admin.user-id</em> is not set, no users or privileges will be created. So, after the initial setup, removing this property will not remove the user nor the privilege that has been configured before.</p>
</div>
<div class="paragraph">
<p>Basic HTTP access authentication is used, so you should always include a <em>Authorization: Basic &#8230;&#8203;==</em> HTTP-header when performing requests or include the username and password in the request-url (for example, <em><a href="http://username:password@localhost:8080/xyz" class="bare">http://username:password@localhost:8080/xyz</a></em>).</p>
</div>
<div class="paragraph">
<p><strong>We recommend that you use Basic Authentication in combination with HTTPS.</strong></p>
</div>
</div>
<div class="sect3">
<h4 id="_configuration_2">7.1.2. Configuration</h4>
<div class="paragraph">
<p>The Flowable REST web application uses Spring Java Configuration for starting the Flowable Form engine, defining the basic authentication security using Spring security, and to define the variable converters for specific variable handling.
A small number of properties can be defined by changing the flowable-app.properties file you can find in the WEB-INF/META-INF/flowable-app/flowable-app.properties folder.
If you need more advanced configuration options there&#8217;s the possibility to override the default Spring beans in XML in the flowable-custom-context.xml file you can also find in the WEB-INF/classes folder.
An example configuration is already in comments in this file. This is also the place to override the default RestResponseFactory by defining a new Spring bean with the name restResponsefactory and use your custom implementation class for it.</p>
</div>
</div>
<div class="sect3">
<h4 id="restUsageInTomcat">7.1.3. Usage in Tomcat</h4>
<div class="paragraph">
<p>Due to <a href="http://tomcat.apache.org/tomcat-8.0-doc/security-howto.html"> default security properties on Tomcat</a>, <strong>escaped forward slashes (<code>%2F</code> and <code>%5C</code>) are not allowed by default (400-result is returned).</strong> This may have an impact on the deployment resources and their data-URL, as the URL can potentially contain escaped forward slashes.</p>
</div>
<div class="paragraph">
<p>When issues are experienced with unexpected 400-results, set the following system-property:</p>
</div>
<div class="paragraph">
<p><em>-Dorg.apache.tomcat.util.buf.UDecoder.ALLOW_ENCODED_SLASH=true</em></p>
</div>
<div class="paragraph">
<p>It&#8217;s best practice to always set the <strong>Accept</strong> and <strong>Content-Type</strong> (in case of posting/putting JSON) headers to <strong>application/json</strong> on the HTTP requests described below.</p>
</div>
</div>
<div class="sect3">
<h4 id="_methods_and_return_codes">7.1.4. Methods and return-codes</h4>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. HTTP-methods and corresponding operations</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Method</th>
<th class="tableblock halign-left valign-top">Operations</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>GET</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get a single resource or get a collection of resources.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>POST</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create a new resource. Also used for executing resource-queries which have a too complex request-structure to fit in the query-URL of a GET-request.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PUT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Update properties of an existing resource. Also used for invoking actions on an existing resource.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DELETE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delete an existing resource.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. HTTP-methods response codes</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Response</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>200 - Ok</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The operation was successful and a response has been returned (<code>GET</code> and <code>PUT</code> requests).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>201 - Created</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The operation was successful and the entity has been created and is returned in the response-body (<code>POST</code> request).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>204 - No content</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The operation was successful and entity has been deleted and therefore there is no response-body returned (<code>DELETE</code> request).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>401 - Unauthorized</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The operation failed. The operation requires an Authentication header to be set. If this was present in the request, the supplied credentials are not valid or the user is not authorized to perform this operation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>403 - Forbidden</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The operation is forbidden and should not be re-attempted. This implies an issue with authorization not authentication, it&#8217;s an operation that is not allowed. Example: deleting a task that is part of a running process is not allowed and will never be allowed, regardless of the user or process/task state.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>404 - Not found</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The operation failed. The requested resource was not found.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>405 - Method not allowed</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The operation failed. The method is not allowed for this resource. For example, trying to update (PUT) a deployment-resource will result in a <code>405</code> status.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>409 - Conflict</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The operation failed. The operation causes an update of a resource that has been updated by another operation, which makes the update no longer valid. Can also indicate a resource that is being created in a collection where a resource with that identifier already exists.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>415 - Unsupported Media Type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The operation failed. The request body contains an unsupported media type. Also occurs when the request-body JSON contains an unknown attribute or value that doesn&#8217;t have the right format/type to be accepted.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>500 - Internal server error</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The operation failed. An unexpected exception occurred while executing the operation. The response-body contains details about the error.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The media-type of the HTTP-responses is always <code>application/json</code> unless binary content is requested (for example, deployment resource data), the media-type of the content is used.</p>
</div>
</div>
<div class="sect3">
<h4 id="_error_response_body">7.1.5. Error response body</h4>
<div class="paragraph">
<p>When an error occurs (both client and server, 4XX and 5XX status-codes) the response body contains an object describing the error that occurred. An example for a 404-status when a task is not found:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="json">{
  "statusCode" : 404,
  "errorMessage" : "Could not find a task with id '444'."
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_request_parameters">7.1.6. Request parameters</h4>
<div class="sect4">
<h5 id="_url_fragments">URL fragments</h5>
<div class="paragraph">
<p>Parameters that are part of the URL (for example, the deploymentId parameter in <code><a href="http://host/flowable-rest/form-api/form-repository/deployments/{deploymentId}" class="bare">http://host/flowable-rest/form-api/form-repository/deployments/{deploymentId}</a></code>)
 need to be properly escaped (see <a href="https://en.wikipedia.org/wiki/Percent-encoding">URL-encoding or Percent-encoding</a>) in case the segment contains special characters. Most frameworks have this functionality built in, but it should be taken into account. Especially for segments that can contain forward-slashes (for example, deployment resource), this is required.</p>
</div>
</div>
<div class="sect4">
<h5 id="_rest_url_query_parameters">Rest URL query parameters</h5>
<div class="paragraph">
<p>Parameters added as query-string in the URL (for example, the name parameter used in <code><a href="http://host/flowable-rest/form-api/form-repository/deployments?name=Deployment" class="bare">http://host/flowable-rest/form-api/form-repository/deployments?name=Deployment</a></code>) can have the following types and are mentioned in the corresponding REST-API documentation:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. URL query parameter types</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Format</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Plain text parameters. Can contain any valid characters that are allowed in URLs. In the case of a <code>XXXLike</code> parameter, the string should contain the wildcard character <code>%</code> (properly URL-encoded). This allows you to specify the intent of the like-search. For example, <em><code>Tas%</code></em> matches all values, starting with <em>Tas</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parameter representing an integer value. Can only contain numeric non-decimal values, between -2.147.483.648 and 2.147.483.647.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parameter representing a long value. Can only contain numeric non-decimal values, between -9.223.372.036.854.775.808 and 9.223.372.036.854.775.807.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parameter representing a boolean value. Can be either <code>true</code> or <code>false</code>. All other values other than these will cause a <em><code>405 - Bad request</code></em> response.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parameter representing a date value. Use the ISO-8601 date-format (see <a href="http://en.wikipedia.org/wiki/ISO_8601">ISO-8601 on wikipedia</a>) using both time and date-components (e.g. <code>2013-04-03T23:45Z</code>).</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="restJsonBody">JSON body parameters</h5>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 4. JSON parameter types</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Format</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Plain text parameters. In the case of a <code>XXXLike</code> parameter, the string should contain the wildcard character <code>%</code>. This allows you to specify the intent of the like-search. For example, <em><code>Tas%</code></em> matches all values, starting with <em>Tas</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parameter representing an integer value, using a JSON number. Can only contain numeric non-decimal values, between -2.147.483.648 and 2.147.483.647.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parameter representing a long value, using a JSON number. Can only contain numeric non-decimal values, between -9.223.372.036.854.775.808 and 9.223.372.036.854.775.807.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parameter representing a date value, using a JSON text. Use the ISO-8601 date-format (see <a href="http://en.wikipedia.org/wiki/ISO_8601">ISO-8601 on wikipedia</a>) using both time and date-components (for example, <code>2013-04-03T23:45Z</code>).</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="restPagingAndSort">Paging and sorting</h5>
<div class="paragraph">
<p>Paging and order parameters can be added as query-string in the URL (for example, the name parameter used in <code><a href="http://host/flowable-rest/form-api/form-repository/deployments?sort=name" class="bare">http://host/flowable-rest/form-api/form-repository/deployments?sort=name</a></code>).</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 5. Variable query JSON parameters</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sort</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">different per query implementation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the sort key, for which the default value and the allowed values are different per query implementation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">order</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">asc</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sorting order which can be <em>asc</em> or <em>desc</em>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">start</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parameter to allow for paging of the result. By default the result will start at 0.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">size</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parameter to allow for paging of the result. By default the size will be 10.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="restQueryVariable">JSON query variable format</h5>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="json">{
  "name" : "variableName",
  "value" : "variableValue",
  "operation" : "equals",
  "type" : "string"
}</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 6. Variable query JSON parameters</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the variable to include in a query. Can be empty in the case where <em><code>equals</code></em> is used in some queries to query for resources that have <strong>any variable name</strong> with the given value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value of the variable included in the query, should include a correct format for the given type.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">operator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Operator to use in query, can have the following values: <code>equals, notEquals, equalsIgnoreCase, notEqualsIgnoreCase, lessThan, greaterThan, lessThanOrEquals, greaterThanOrEquals</code> and <code>like</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type of variable to use. When omitted, the type will be deduced from the <code>value</code> parameter. Any JSON text-values will be considered of type <code>string</code>, JSON booleans of type <code>boolean</code>, JSON numbers of type <code>long</code> or <code>integer</code> depending on the size of the number. We recommended you include an explicit type when in doubt. Types supported out of the box are listed below.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 7. Default query JSON types</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value is treated as and converted to a <code>java.lang.String</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">short</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value is treated as and converted to a <code>java.lang.Integer</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value is treated as and converted to a <code>java.lang.Integer</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value is treated as and converted to a <code>java.lang.Long</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value is treated as and converted to a <code>java.lang.Double</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value is treated as and converted to a <code>java.lang.Boolean</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">date</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value is treated as and converted to a <code>java.util.Date</code>. The JSON string will be converted using ISO-8601 date format.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="restVariables">Variable representation</h5>
<div class="paragraph">
<p>When working with variables (execute decision), the REST API uses some common principles and JSON-format for both reading and writing. The JSON representation of a variable looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="json">{
  "name" : "variableName",
  "value" : "variableValue",
  "valueUrl" : "http://...",
  "type" : "string"
}</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 8. Variable JSON attributes</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the variable.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value of the variable. When writing a variable and <code>value</code> is omitted, <code>null</code> will be used as value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">valueUrl</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When reading a variable of type <code>binary</code> or <code>serializable</code>, this attribute will point to the URL from where the raw binary data can be fetched.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type of the variable. See table below for additional information on types. When writing a variable and this value is omitted, the type will be deduced from the raw JSON-attribute request type and is limited to either <code>string</code>, <code>double</code>, <code>integer</code> and <code>boolean</code>. We advise you to always include a type to make sure no wrong assumption about the type are made.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 9. Variable Types</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value is treated as a <code>java.lang.String</code>. Raw JSON-text value is used when writing a variable.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value is treated as a <code>java.lang.Integer</code>. When writing, JSON number value is used as base for conversion, falls back to JSON text.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">short</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value is treated as a <code>java.lang.Short</code>. When writing, JSON number value is used as base for conversion, falls back to JSON text.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">long</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value is treated as a <code>java.lang.Long</code>. When writing, JSON number value is used as base for conversion, falls back to JSON text.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">double</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value is treated as a <code>java.lang.Double</code>. When writing, JSON number value is used as base for conversion, falls back to JSON text.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value is treated as a <code>java.lang.Boolean</code>. When writing, JSON boolean value is used for conversion.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">date</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value is treated as a <code>java.util.Date</code>. When writing, the JSON text will be converted using ISO-8601 date format.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>It&#8217;s possible to support additional variable-types with a custom JSON representation (either simple value or complex/nested JSON object). By extending the <code>initializeVariableConverters()</code> method on <code>org.flowable.dmn.rest.service.api.DmnRestResponseFactory</code>, you can add additional <code>org.flowable.rest.variable.RestVariableConverter</code> classes to support converting your POJOs to a format suitable for transferring through REST and converting the REST-value back to your POJO. The actual transformation to JSON is done by Jackson.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_deployment">7.2. Deployment</h3>
<div class="paragraph">
<p><strong>When using tomcat, please read <a href="#restUsageInTomcat">Usage in Tomcat</a>.</strong></p>
</div>
<div class="sect3">
<h4 id="_list_of_dmn_deployments">7.2.1. List of DMN Deployments</h4>
<div class="listingblock">
<div class="content">
<pre>GET dmn-repository/deployments</pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 10. URL query parameters</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only return deployments with the given name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nameLike</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only return deployments with a name like the given name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">category</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only return deployments with the given category.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">categoryNotEquals</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only return deployments which don&#8217;t have the given category.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tenantId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only return deployments with the given tenantId.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tenantIdLike</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only return deployments with a tenantId like the given value.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">withoutTenantId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If <code>true</code>, only returns deployments without a tenantId set. If <code>false</code>, the <code>withoutTenantId</code> parameter is ignored.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sort</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>id</em> (default), <em>name</em>, <em>deploytime</em> or <em>tenantId</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Property to sort on, to be used together with the <em>order</em>.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 11. REST Response codes</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Response code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">200</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates the request was successful.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Success response body:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="json">{
  "data": [
    {
      "id": "03ab310d-c1de-11e6-a4f4-62ce84ef239e",
      "name": null,
      "deploymentTime": "2016-12-14T10:16:37.000+01:00",
      "category": null,
      "url": "http://localhost:8080/flowable-rest/dmn-api/dmn-repository/deployments/03ab310d-c1de-11e6-a4f4-62ce84ef239e",
      "parentDeploymentId": "17510",
      "tenantId": ""
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "id",
  "order": "asc",
  "size": 1
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_get_a_dmn_deployment">7.2.2. Get a DMN deployment</h4>
<div class="listingblock">
<div class="content">
<pre>GET dmn-repository/deployments/{deploymentId}</pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 12. Get a deployment - URL parameters</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">deploymentId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The identifier of the deployment to get.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 13. Get a deployment - Response codes</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Response code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">200</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates the deployment was found and returned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates the requested deployment was not found.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Success response body:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="json">{
  "id": "03ab310d-c1de-11e6-a4f4-62ce84ef239e",
  "name": null,
  "deploymentTime": "2016-12-14T10:16:37.000+01:00",
  "category": null,
  "url": "http://localhost:8080/flowable-rest/dmn-api/dmn-repository/deployments/03ab310d-c1de-11e6-a4f4-62ce84ef239e",
  "parentDeploymentId": "17510",
  "tenantId": ""
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_create_a_new_dmn_deployment">7.2.3. Create a new DMN deployment</h4>
<div class="listingblock">
<div class="content">
<pre>POST dmn-repository/deployments</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Request body:</strong></p>
</div>
<div class="paragraph">
<p>The request body should contain data of type <em>multipart/form-data</em>. There should be exactly one file in the request: any additional files will be ignored. The deployment name is the name of the file-field passed in.</p>
</div>
<div class="paragraph">
<p>An additional parameter (form-field) can be passed in the request body with name <code>tenantId</code>. The value of this field will be used as the identifier of the tenant in which this deployment is done.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 14. Create a new DMN deployment - Response codes</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Response code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">201</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates the deployment was created.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">400</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates there was no content present in the request body or the content mime-type is not supported for deployment. The status-description contains additional information.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Success response body:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="json">{
  "id": "03ab310d-c1de-11e6-a4f4-62ce84ef239e",
  "name": "newDeployment1",
  "deploymentTime": "2016-12-14T10:16:37.000+01:00",
  "category": null,
  "url": "http://localhost:8080/flowable-rest/dmn-api/dmn-repository/deployments/03ab310d-c1de-11e6-a4f4-62ce84ef239e",
  "tenantId" : "myTenant"
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_delete_a_dmn_deployment">7.2.4. Delete a DMN deployment</h4>
<div class="listingblock">
<div class="content">
<pre>DELETE dmn-repository/deployments/{deploymentId}</pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 15. Delete a DMN deployment - URL parameters</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">deploymentId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The identifier of the deployment to delete.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 16. Delete a DMN deployment - Response codes</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Response code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">204</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates the deployment was found and has been deleted. Response-body is intentionally empty.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates the requested deployment was not found.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_get_a_dmn_deployment_resource_content">7.2.5. Get a DMN deployment resource content</h4>
<div class="listingblock">
<div class="content">
<pre>GET dmn-repository/deployments/{deploymentId}/resourcedata/{resourceId}</pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 17. Get a deployment resource content - URL parameters</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">deploymentId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The identifier of the deployment the requested resource is part of.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">resourceId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The identifier of the resource to get the data for. <strong>Make sure you URL-encode the resourceId in case it contains forward slashes. For example, use <em>decisions%2Fmy-decision.dmn</em> instead of <em>decisions/my-decision.dmn</em>.</strong></p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 18. Get a deployment resource content - Response codes</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Response code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">200</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates both deployment and resource have been found and the resource data has been returned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates the requested deployment was not found or there is no resource with the given identifier present in the deployment. The status-description contains additional information.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Success response body:</strong></p>
</div>
<div class="paragraph">
<p>The response body will contain the binary resource-content for the requested resource. The response content-type will be the same as the type returned in the resources <em>mimeType</em> property. Also, a content-disposition header is set, allowing browsers to download the file instead of displaying it.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_decision_tables">7.3. Decision Tables</h3>
<div class="sect3">
<h4 id="_list_of_decision_tables">7.3.1. List of decision tables</h4>
<div class="listingblock">
<div class="content">
<pre>GET dmn-repository/decision-tables</pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 19. List of process definitions - URL parameters</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">version</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only return process definitions with the given version.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only return process definitions with the given name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nameLike</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only return process definitions with a name like the given name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">key</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only return process definitions with the given key.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">keyLike</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only return process definitions with a name like the given key.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">resourceName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only return process definitions with the given resource name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">resourceNameLike</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only return process definitions with a name like the given resource name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">category</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only return process definitions with the given category.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">categoryLike</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only return process definitions with a category like the given name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">categoryNotEquals</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only return process definitions which don&#8217;t have the given category.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">deploymentId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only return process definitions which are part of a deployment with the given identifier.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">latest</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only return the latest process definition versions. Can only be used together with <em>key</em> and <em>keyLike</em> parameters, using any other parameter will result in a 400-response.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sort</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>name</em> (default), <em>id</em>, <em>key</em>, <em>category</em>, <em>deploymentId</em> and <em>version</em></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Property to sort on, to be used together with the <em>order</em>.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 20. List of process definitions - Response codes</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Response code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">200</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates request was successful and the decision tables are returned</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">400</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates a parameter was passed in the wrong format or that <em>latest</em> is used with other parameters other than <em>key</em> and <em>keyLike</em>. The status-message contains additional information.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Success response body:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="json">{
  "data": [
        {
      "id": "46b0379c-c0a1-11e6-bc93-6ab56fad108a",
      "url": "http://localhost:8080/flowable-rest/dmn-api/dmn-repository/decision-tables/46b0379c-c0a1-11e6-bc93-6ab56fad108a",
      "category": null,
      "name": "Decision Table One",
      "key": "DecisionTableOne",
      "description": null,
      "version": 3,
      "resourceName": "dmn-DecisionTableOne.dmn",
      "deploymentId": "46aa6b3a-c0a1-11e6-bc93-6ab56fad108a",
      "parentDeploymentId": "5001",
      "tenantId": ""
    }
  ],
  "total": 1,
  "start": 0,
  "sort": "name",
  "order": "asc",
  "size": 1
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_get_a_decision_table">7.3.2. Get a decision table</h4>
<div class="listingblock">
<div class="content">
<pre>GET dmn-repository/decision-tables/{decisionTableId}</pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 21. Get a decision table - URL parameters</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">decisionTableId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The identifier of the decision table to get.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 22. Get a decision table - Response codes</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Response code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">200</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates the decision table was found and returned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates the requested decision table was not found.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Success response body:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="json">{
  "id": "46b0379c-c0a1-11e6-bc93-6ab56fad108a",
  "url": "http://localhost:8080/flowable-rest/dmn-api/dmn-repository/decision-tables/46b0379c-c0a1-11e6-bc93-6ab56fad108a",
  "category": null,
  "name": "Decision Table One",
  "key": "DecisionTableOne",
  "description": null,
  "version": 3,
  "resourceName": "dmn-DecisionTableOne.dmn",
  "deploymentId": "46aa6b3a-c0a1-11e6-bc93-6ab56fad108a",
  "parentDeploymentId": "5001",
  "tenantId": ""
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_get_a_decision_table_resource_content">7.3.3. Get a decision table resource content</h4>
<div class="listingblock">
<div class="content">
<pre>GET dmn-repository/decision-tables/{decisionTableId}/resourcedata</pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 23. Get a decision table resource content - URL parameters</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">decisionTableId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The identifier of the decision table to get the resource data for.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Response:</strong></p>
</div>
<div class="paragraph">
<p>Exactly the same response codes/boy as <code>GET dmn-repository/deployment/{deploymentId}/resourcedata/{resourceId}</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_get_a_decision_table_dmn_model">7.3.4. Get a decision table DMN model</h4>
<div class="listingblock">
<div class="content">
<pre>GET dmn-repository/decision-tables/{decisionTableId}/model</pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 24. Get a decision table DMN model - URL parameters</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Required</th>
<th class="tableblock halign-left valign-top">Value</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">decisionTableId</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The identifier of the decision table to get the model for.</p></td>
</tr>
</tbody>
</table>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 25. Get a decision table DMN model - Response codes</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Response code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">200</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates the decision table was found and the model is returned.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">404</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates the requested decision table was not found.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Response body:</strong>
The response body is a JSON representation of the <code>org.flowable.dmn.model.DmnDefinition</code> and contains the full DMN definition model.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="json">{
   "processes":[
      {
         "id":"oneTaskProcess",
         "xmlRowNumber":7,
         "xmlColumnNumber":60,
         "extensionElements":{

         },
         "name":"The One Task Process",
         "executable":true,
         "documentation":"One task process description",

    ]
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_dmn_rule_service">7.4. DMN Rule Service</h3>
<div class="sect3">
<h4 id="_execute_a_decision">7.4.1. Execute a decision</h4>
<div class="listingblock">
<div class="content">
<pre>POST dmn-rule/execute</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Request body:</strong></p>
</div>
<div class="paragraph">
<p>The request body should contain data of type <em>multipart/form-data</em>. The decisionKey is required. The tenantId, parentDeploymentId and a map of inputVariables (restVariables) are optional.</p>
</div>
<div class="paragraph">
<p><strong>Response body:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="json">{
  "resultVariables": [
    [
      {
        "name": "output1",
        "type": "string",
        "value": "result 1"
      }
    ],
    [
      {
        "name": "output1",
        "type": "string",
        "value": "result 2"
      }
    ],
    [
      {
        "name": "output1",
        "type": "string",
        "value": "result 3"
      }
    ]
  ],
  "url": "http://localhost:8080/flowable-rest/dmn-api/dmn-rule/execute"
}</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 26. Execute a decision - Response codes</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Response code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">201</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates the Decision has been executed.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_execute_a_single_result_decision">7.4.2. Execute a single result decision</h4>
<div class="listingblock">
<div class="content">
<pre>POST dmn-rule/execute/single-result</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Request body:</strong></p>
</div>
<div class="paragraph">
<p>The request body should contain data of type <em>multipart/form-data</em>. The decisionKey is required. The tenantId, parentDeploymentId and a map of inputVariables (restVariables) are optional.</p>
</div>
<div class="paragraph">
<p>When multiple rules are valid the service will respond with a 500 code.
<strong>Note: a single hit with a compound output is valid (see response below)</strong></p>
</div>
<div class="paragraph">
<p><strong>Response body:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="json">{
  "resultVariables": [
    {
      "name": "output1",
      "type": "string",
      "value": "compound 1"
    },
    {
      "name": "output2",
      "type": "string",
      "value": "compound 2"
    }
  ],
  "url": "http://localhost:8080/flowable-rest/dmn-api/dmn-rule/execute/single-result"
}</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 27. Execute a single resultdecision - Response codes</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Response code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">201</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates the Decision has been executed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">500</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates the Decision returned multiple results.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_engine">7.5. Engine</h3>
<div class="sect3">
<h4 id="_get_dmn_engine_info">7.5.1. Get DMN engine info</h4>
<div class="listingblock">
<div class="content">
<pre>GET dmn-management/engine</pre>
</div>
</div>
<div class="paragraph">
<p>Returns a read-only view of the DMN engine that is used in this REST-service.</p>
</div>
<div class="paragraph">
<p><strong>Success response body:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="json">{
   "name":"default",
   "version":"6.4.1",
   "resourceUrl":"file://flowable-dmn/flowable.dmn.cfg.xml",
   "exception":null
}</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 28. Get engine information - Response codes</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Response code</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">200</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates the engine information has been returned.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</body>
</html>